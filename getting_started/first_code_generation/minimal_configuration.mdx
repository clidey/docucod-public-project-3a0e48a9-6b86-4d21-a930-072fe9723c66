---
title: "Minimal Configuration"
description: "Explains default and optional configuration steps using `genconfig.Config` for customized code generation, demonstrating both configuration-free and advanced setups."
---

# Minimal Configuration Guide

This guide introduces you to the minimal configuration approach for customizing the GORM CLI code generation. It explains how to use the `genconfig.Config` struct to influence the output with default settings or more advanced customizations. Whether you aim to generate code without any special configurations or tweak specific behaviors, this page shows you how to get started efficiently.

---

## Understanding genconfig.Config

GORM CLI automatically detects a package-level variable named `genconfig.Config` within the source packages you generate code from. By declaring this variable, you can customize aspects such as:

- Output destination folder for generated code (`OutPath`)
- Type mappings to assign field helpers for specific Go types
- Naming mappings for fields tagged with `gen:"name"` (e.g., JSON fields)
- Inclusion or exclusion of specific interfaces or structs using patterns
- Whether configuration applies at package or file level

Without any explicit config, GORM CLI uses sensible defaults and generates code for all interfaces and structs it finds.

---

## 1. Using Configuration-Free Generation

The simplest setup requires no configuration. Simply run the CLI generator on packages containing your interfaces and models, and the generated code will appear under the default output (`./g`).

Example:

```bash
gorm gen -i ./examples/models -o ./generated
```

This command generates all interfaces and structs under `./generated` with default type and field mappings.

<Tip>
If you haven't declared a `genconfig.Config` variable in your source packages, you get this out-of-the-box experience with minimal fuss.
</Tip>

---

## 2. Declaring a Basic genconfig.Config

To customize generation, declare the config in a source file within the package you want to generate, typically like this:

```go
package examples

import (
  "database/sql"
  "gorm.io/cli/gorm/field"
  "gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
  OutPath: "examples/output", // Overrides CLI output path

  FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{}, // Map sql.NullTime to time field helper
  },

  FieldNameMap: map[string]any{
    "date": field.Time{},        // Map `gen:"date"` tag to Time helper
    "json": JSON{},             // Map `gen:"json"` tag to custom JSON helper
  },

  IncludeInterfaces: []any{}, // Process all by default
}
```

Place this in a file that is compiled alongside your interfaces/models. The generator automatically picks it up and applies the settings.

<Note>
You must import types and helpers you refer to, so the generator can infer imports and render the correct code.
</Note>

---

## 3. How to Control What Gets Generated

Use the following slices in the config to filter generation targets:

- `IncludeInterfaces` / `ExcludeInterfaces`: Specify interface patterns or type literals to whitelist or blacklist
- `IncludeStructs` / `ExcludeStructs`: Similarly control which struct types to generate helpers for

Example - include only interfaces starting with "Query":

```go
var _ = genconfig.Config{
  IncludeInterfaces: []any{"Query*"},
}
```

Example - exclude deprecated interfaces:

```go
var _ = genconfig.Config{
  ExcludeInterfaces: []any{"*Deprecated*"},
}
```

Patterns can be partial type names, wildcards (`*`), or fully qualified types.

---

## 4. File Level vs Package Level Configuration

By default, configuration applies to the entire package subtree. Set `FileLevel: true` if you want the config to only affect generated code in the same source file as the config declaration.

```go
var _ = genconfig.Config{
  FileLevel: true,
}
```

This is useful for granular control when your package contains diverse interfaces or models that need different settings.

---

## 5. Real-World Example: JSON Field Mapping

Suppose you need to generate special helpers for JSON fields tagged with `gen:"json"`:

### Step 1: Declare your `genconfig.Config` with FieldNameMap

```go
package examples

import "gorm.io/cli/gorm/genconfig"

var _ = genconfig.Config{
  OutPath: "examples/output",
  FieldNameMap: map[string]any{
    "json": JSON{}, // Custom JSON helper for fields tagged with gen:"json"
  },
}
```

### Step 2: Tag your model field

```go
package models

type User struct {
  ID      uint
  Profile string `gen:"json"` // This field uses JSON helper
}
```

GORM CLI recognizes the tag, applies your `JSON` helper, and generates type-safe code for querying JSON contents efficiently.

---

## 6. How to Verify Your Configuration Takes Effect

After running the generator, confirm the following:

- Generated files exist at your specified `OutPath`.
- Generated field helpers reflect your custom type mappings.
- Only interfaces and structs matching your include/exclude filters appear.

Example CLI command:

```bash
gorm gen -i ./examples -o ./examples/output
```

If no config is present or overridden, generated code appears under `./g` by default.

---

## Common Pitfalls and Troubleshooting

<AccordionGroup title="Troubleshooting genconfig.Config Configuration">
<Accordion title="Config Not Loaded or Applied">
- Ensure `genconfig.Config` variable is declared at package scope in the same package as your interfaces/models.
- Confirm the file containing config is compiled and included when running the generator.
- No multiple conflicting `genconfig.Config` variables in the same package.
</Accordion>
<Accordion title="Output Directory Not Changing">
- Verify the `OutPath` is correctly set in the config (relative to the package directory).
- Double-check CLI options do not override or conflict with the config.
</Accordion>
<Accordion title="Type or Field Mapping Not Working">
- Import the required helper types in your config file.
- Use proper helper instances (e.g., `field.Time{}`, `JSON{}`) for mappings.
- Remember `FieldNameMap` takes priority over `FieldTypeMap`.
</Accordion>
<Accordion title="Filtering Does Not Include/Exclude Expected Types">
- Use correct patterns or type literals in include/exclude slices.
- The whitelist (`Include*`) takes precedence over blacklists (`Exclude*`).
- Check spelling and case sensitivity.
</Accordion>
</AccordionGroup>

---

## Summary

Using `genconfig.Config` provides a powerful yet straightforward way to customize how GORM CLI generates code for your project. Whether you prefer zero-configuration or tailored generation, declaring this package-level variable lets you make precise adjustments to output paths, type mappings, and which code gets generated.

Explore the related documentation for deeper dives into the CLI usage, code generation process, and configuring advanced custom field helpers.

---

## Helpful Links

- [Generating Code](https://docs.gorm.io/cli/getting_started/first_code_generation/generating_code) — How to run the CLI generator
- [Using Custom Field Helpers](https://docs.gorm.io/cli/guides/advanced-patterns-customization/custom-field-helpers) — Defining and using helpers like JSON
- [Configuration Reference](https://github.com/go-gorm/cli/blob/main/genconfig/config.go) — Official `genconfig.Config` struct details
- [Quickstart Workflow](https://docs.gorm.io/cli/overview/architecture-and-concepts/quickstart-workflow) — How configuration fits into your first code gen workflow

---