---
title: "Generating Code"
description: "Provides a step-by-step workflow to run `gorm gen`, using real model and query interface examples. Users will learn how to generate code, what the output looks like, and how to target the output directory."
---

# Generating Code with GORM CLI

This guide provides a **step-by-step workflow** to run the `gorm gen` command using real model and query interface examples. You will learn how to generate type-safe query APIs and model-driven field helpers, understand the generated output, and specify the output directory location.

---

## 1. Before You Start

Ensure you have the following prerequisites covered:

- **Go Environment** with version 1.18 or newer installed.
- **GORM CLI installed**, typically via:

  ```bash
  go install gorm.io/cli/gorm@latest
  ```

- **Your Go project has defined models and query interfaces** with embedded SQL template comments.

- Familiarity with your working directory structure where input source files reside.

Refer to our [System Requirements](./system_requirements) and [Installing the GORM CLI](./installing_cli) pages for detailed setup instructions.

---

## 2. Structure Your Input Code

You must have Go interfaces representing your queries that include SQL template comments and associated model structs that define the database schema.

For example, your models might look like this:

```go
package models

import (
  "database/sql"
  "time"
  "gorm.io/gorm"
)

type User struct {
  gorm.Model
  Name string
  Age  int
  // other fields...
}

// Other models like Account, Pet, etc. may be defined similarly
```

And your query interface (e.g., in `examples/query.go`) might include:

```go
package examples

type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)

  // SELECT * FROM @@table WHERE @@column=@value
  FilterWithColumn(column string, value string) (T, error)

  // More query methods with SQL templates in comments
}
```

This structure allows GORM CLI to analyze your Go code and extract the necessary information to generate safe and fluent APIs.

---

## 3. Run the `gorm gen` Command

Use the CLI command to generate your APIs from the source interface and model files.

### Command Syntax

```bash
gorm gen -i ./path/to/interfaces -o ./path/to/generated/code
```

Where:

- `-i` (or `--input`) is the path to the Go interface source file or directory containing your query interfaces with SQL template comments.
- `-o` (or `--output`) is the directory where the generated code will be placed.

> **Tip:** If you omit `-o`, the default output path is `./g`.

### Example

Assuming your interfaces and models are in the `examples` directory:

```bash
gorm gen -i ./examples -o ./generated
```

This command will traverse the `examples` directory, parse the Go files, apply any present `genconfig.Config` configurations, and write generated code into the `generated` directory preserving relative paths.

---

## 4. What is Generated?

The generator produces two complementary pieces of code:

### 4.1 Query APIs from Interfaces
- Concrete implementations for methods declared in your query interfaces.
- Method bodies based on embedded SQL templates with parameter bindings for type safety.
- Fluent query interfaces tightly coupled to your GORM models.

Example generated method signature:

```go
func (e _QueryImpl[T]) GetByID(ctx context.Context, id int) (T, error) {
  // Generated SQL execution
}
```

### 4.2 Model-Driven Field Helpers
- Strongly typed fields and association helper variables based on your GORM model structs.
- Helpers for common predicates, updates, and association operations.

Example:

```go
var User = struct {
  ID   field.Number[uint]
  Name field.String
  Age  field.Number[int]
  // Association helpers like User.Pets, User.Account...
}{
  ID:   field.Number[uint]{}.WithColumn("id"),
  Name: field.String{}.WithColumn("name"),
  Age:  field.Number[int]{}.WithColumn("age"),
}
```

---

## 5. Verify Generated Output

Navigate to your output directory (e.g., `./generated`) and inspect the generated Go files. You should see:

- Files containing implementations of your query interfaces.
- Model helper files defining typed fields and association helpers.

> **Check:** Generated files begin with the standard header comment:
>
> ```go
> // Code generated by 'gorm.io/cli/gorm'. DO NOT EDIT.
> ```

---

## 6. Customize Output with `genconfig.Config` (Optional)

If you want to override defaults like the output path or control what gets generated, declare a `genconfig.Config` variable in your package with your custom options.

Example:

```go
package examples

import (
  "database/sql"
  "gorm.io/cli/gorm/genconfig"
  "gorm.io/cli/gorm/field"
)

var _ = genconfig.Config{
  OutPath: "examples/output",
  FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{},
  },
  IncludeInterfaces: []any{"Query*"},
}
```

- Place this config in a file scanned during generation.
- It controls per-package output path, interface/struct filters, and type mappings.

Learn more from our [Minimal Configuration](./minimal_configuration) guide.

---

## 7. Common Usage Flow

<Steps>
<Step title="Prepare Your Models and Query Interfaces">
Define your GORM models and write interfaces with embedded SQL templates.
</Step>
<Step title="Run GORM CLI Generation">
Execute `gorm gen` with appropriate input and output flags.
</Step>
<Step title="Inspect Generated Code">
Review generated files in your output folder to ensure they match expectations.
</Step>
<Step title="Use Generated APIs in Your Application">
Import the generated package and use the query methods and field helpers in your code.
</Step>
</Steps>

---

## 8. Troubleshooting

<AccordionGroup title="Common Issues When Generating Code">
<Accordion title="Command Not Found or Not Installed">
Make sure you installed the GORM CLI using `go install gorm.io/cli/gorm@latest` and that your `$GOPATH/bin` or `$GOBIN` is in your system `PATH`.
</Accordion>
<Accordion title="Input Path Not Found or Empty">
Verify the path passed to `-i` points to your Go source files containing interfaces. Ensure files are syntactically valid.
</Accordion>
<Accordion title="No Interfaces or Structs Were Generated">
Check if you have filters configured via `genconfig.Config` that might exclude all your types. Try removing filters or verify naming.
</Accordion>
<Accordion title="Output Path Issues or Write Permission Errors">
Confirm the target output directory exists or the process has permissions to create/write files.
</Accordion>
</AccordionGroup>

---

## 9. Next Steps

- Use the generated query APIs and field helpers within your Go application to interact with your database with type safety.
- Explore [Minimal Configuration](./minimal_configuration) to fine-tune generation.
- Follow guides on [Using Generated APIs](../../../guides/getting-started-workflows/using-generated-apis) for practical consumption examples.
- Consult [Troubleshooting & Validation](../../troubleshooting_and_faq/common_installation_issues) for advanced diagnostics.

---

## Additional Resources

- [System Requirements](./system_requirements)
- [Installing the GORM CLI](./installing_cli)
- [Minimal Configuration](./minimal_configuration)
- [Your First Code Generation: Models and Queries](../../../guides/getting-started-workflows/your-first-codegen)
- [Using Generated APIs in Your Application](../../../guides/getting-started-workflows/using-generated-apis)

---

With these steps, you'll be confidently generating robust, type-safe database query layers that integrate seamlessly with GORM.

---

For any issues, consult the GORM CLI repository or community forums for assistance.


---

<style>
code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
</style>
