---
title: "Troubleshooting Common Issues"
description: "Solve frequent setup and generation challenges, such as missing dependencies, configuration mistakes, or typical code generation errors. Find actionable solutions and tips for a smooth start."
---

# Troubleshooting Common Issues

Encountering issues during setup or code generation is a natural part of adopting any powerful tool like GORM CLI. This guide addresses the most frequent roadblocks you might face—whether related to missing dependencies, configuration mistakes, or errors during code generation—and offers clear, actionable solutions to get you back on track swiftly.

---

## 1. Missing Dependencies

### Problem:
You try running `gorm gen` or use the generated code, but errors indicate missing Go packages or required tools.

### Solution:
Follow these steps to ensure all dependencies are met:

1. **Verify Go version:**
   - GORM CLI requires Go version 1.18 or newer for generics support.
   - Run:
     ```bash
     go version
     ```
   - Ensure the output reports Go 1.18 or higher.

2. **Install GORM CLI properly:**
   - Run:
     ```bash
     go install gorm.io/cli/gorm@latest
     ```
   - Make sure your `$GOPATH/bin` or Go install binaries directory is in your system `PATH`.

3. **Check module dependencies:**
   - Your project should have a `go.mod` file with dependencies including `gorm.io/gorm`.
   - Run:
     ```bash
     go mod tidy
     ```
   - This command will fetch missing dependencies and clean duplicates.

4. **Test basic tool availability:**
   - Run:
     ```bash
     gorm --help
     ```
   - Confirm the CLI responds with usage information.

<Tip>
If errors reference specific missing packages during generation or compilation, confirm the versions in your `go.mod` align with supported versions, and your environment proxy or module cache is not corrupted.
</Tip>

---

## 2. Configuration Mistakes

### Problem:
The generator ignores certain files, generates incomplete code, or you see unexpected filtering of interfaces or structs.

### Common Causes & Fixes:

- **Incorrect `genconfig.Config` declaration**
  - Confirm your config uses the exact package `gorm.io/cli/gorm/genconfig`.
  - Make sure your `genconfig.Config` is declared at the package level as a package variable.
    
  ```go
  package examples

  import "gorm.io/cli/gorm/genconfig"

  var _ = genconfig.Config{
      OutPath: "examples/output",
      IncludeInterfaces: []any{"Query*"},
      // Other config fields
  }
  ```

- **File vs. package level config**
  - File-level config: applies only to the file it is declared in (set `FileLevel: true`)
  - Package-level config: applies to entire package or directory tree (default with `FileLevel: false` or unset)

- **Filtering Interface and Struct patterns**
  - Confirm include/exclude patterns have accurate names matching your interfaces or structs.
  - Patterns use shell-style wildcards (e.g., `"Query*"` to include all starting with "Query").

- **Relative `OutPath` settings**
  - Ensure your `OutPath` is properly set relative to your project root.
  - Avoid overlapping output directories that might interfere.

- **Check for overlapping configs**
  - Multiple configs in one directory or subdirectories can conflict.
  - The generator applies config precedence starting from exact file configs upward.

<Warning>
Misconfigured filters will silently exclude files from generation. If no interfaces or structs generate, check your `Include*` and `Exclude*` lists carefully.
</Warning>

---

## 3. Code Generation Errors

### Problem:
Running `gorm gen` returns errors related to SQL template syntax, method return types, or file parsing.

### Troubleshooting Steps:

1. **Check interface method return signatures**
   - Methods that embed SQL templates must follow these rules:
     - Finish methods (with raw SQL) should return at least one return value.
     - If one return value, it must be `error`.
     - If two return values, the second must be `error`.

2. **Verify SQL Template syntax**
   - Use the supported template DSL directives: `@@table`, `@@column`, `@param`, `{{where}}`, `{{set}}`, `{{if}}`, `{{for}}`.
   - Avoid unsupported or malformed directives in comments.

3. **Validate comments formatting**
   - SQL templates must be placed inside method comments above the method signature.
   - Do not mix unrelated code inside these comments.

4. **Check for special characters**
   - For literal `@` characters in SQL comments (e.g., table names or literals), escape them with a backslash: `\@name`.

5. **Run with verbose output**
   - Use the `-v` flag (if available) to get detailed error messages.

6. **Sample corrections**:

```go
// Good method declaration with template:
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) (T, error)

// Incorrect (missing error return):
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) T
```

---

## 4. Common Pitfalls & Tips

- **Mixing model definitions and queries**
  - Keep your query interfaces and models organized consistently, preferably in the same package or directory.

- **Using package aliases carefully**
  - Imports inside generated files are managed automatically, but if you manually tweak files, import paths must be accurate.

- **Outdated Go tooling can affect formatting**
  - The generator uses `golang.org/x/tools/imports` for formatting. Ensure up-to-date Go tooling is installed.

- **File permission issues**
  - Verify that the output directories permit file creation/modification by your user account.

<Tip>
Before reporting issues, cross-reference your code against provided examples such as `examples/query.go` and check the generated code structure for clues.
</Tip>

---

## 5. Verifying Successful Generation

After running `gorm gen`:

- Check output directory for generated `.go` files matching your input interfaces.
- Inspect generated code files for:
  - Type-safe interface functions named after your interfaces.
  - Field helper structs and predicates per your models.
- Build and run your application or tests to confirm no compilation errors related to the generated code.

If issues persist, retry with minimal example inputs to isolate the problem.

---

## 6. Getting Additional Help

- **Consult the Official Documentation:** Review [GORM CLI Documentation](https://gorm.io/docs/cli.html) for updates and clarifications.
- **Examples Directory:** Examine the examples in the repo for reference configurations and code patterns.
- **Community Support:** Visit GORM GitHub discussions or issue trackers for community advice.


---

## Appendix: Example Troubleshooting Scenario

### Scenario: `gorm gen` fails with "missing method return error"

1. Check your interface methods; ensure return signatures match expectations:

```go
// Incorrect:
GetUser(id int) User

// Correct:
GetUser(id int) (User, error)
```

2. Update your interface, then regenerate.

---

### Scenario: Generated code does not include an interface you expect

1. Verify your `genconfig.Config` filters:

```go
var _ = genconfig.Config{
    IncludeInterfaces: []any{"Query*"}, // Only interfaces starting with Query generated
    ExcludeInterfaces: []any{},
}
```

2. Ensure interface name matches filter pattern.

---

By following these targeted solutions, you will resolve the vast majority of setup and generation issues with GORM CLI, enabling you to leverage its powerful type-safe SQL generation capabilities smoothly.

---