---
title: "Running the Generator"
description: "Simple guide to running `gorm gen` from the CLI, pointing at your models and interfaces to generate type-safe APIs. Walk through CLI options, expected output structure, and what success looks like."
---

# Running the Generator

Welcome to the guide on running the `gorm gen` CLI command, the core tool that generates type-safe APIs from your Go interfaces and model structs. This page walks you through executing the generator from the command line, understanding the CLI options, interpreting the generated code structure, and verifying success.

---

## 1. Prerequisites

Before running the generator, ensure you have:

- **Go 1.18+ installed**: Required for generics support used by GORM CLI.
- **GORM CLI installed**: Use `go install gorm.io/cli/gorm@latest` if not already installed.
- **Go source files prepared**: Your project should contain Go interface files with SQL template comments and model structs.
- **Optional configuration**: If needed, package-level `genconfig.Config` for customization (e.g., output paths, include/exclude filters).

<Tip>
Make sure your interface files have proper SQL template comments as the generator relies on them to create type-safe, raw-SQL query methods.
</Tip>

## 2. Understanding the `gorm gen` Command

The generator is a Cobra-based CLI command named `gen` under the main `gorm` tool. It processes your interfaces and models to produce type-safe query and model helper code.

### Key CLI Flags:

| Flag       | Shortcut | Description                                    | Required |
|------------|----------|------------------------------------------------|----------|
| `--input`  | `-i`     | Path to Go file or directory containing interfaces with raw SQL annotations | Yes      |
| `--output` | `-o`     | Directory to place the generated code (default: `./g`) | No       |

### Example:

```bash
gorm gen -i ./examples -o ./generated
```
Generates code from interfaces in `./examples` to output `./generated`.

<Note>
The `--input` flag must point to your interface Go file or a directory. The generator walks the directory recursively if given a folder.
</Note>

## 3. Running the Generator: Step-by-Step

Follow these steps for a smooth and successful generation:

<Steps>
<Step title="Step 1: Prepare Your Input">
Ensure your input path (`-i`) points to the directory or file with Go interfaces containing SQL template comments.
</Step>
<Step title="Step 2: Choose Output Directory">
Optionally decide on an output folder (`-o`). If omitted, defaults to `./g`.
</Step>
<Step title="Step 3: Execute the Command">
Run the generator.

```bash
gorm gen -i path/to/your/interfaces -o path/to/output
```
</Step>
<Step title="Step 4: Monitor Output and Logs">
The generator prints logs as it processes files and writes output.

Expected log excerpt:

```
Generating file ./generated/your_interface.go from ./examples/query.go...
```
</Step>
<Step title="Step 5: Verify Generated Files">
Check the output directory to confirm generated Go files are present and readable.
</Step>
</Steps>

## 4. Generated Output Structure

The generator produces Go code that includes:

- **Type-Safe Query Interfaces**
  - For each input interface with raw SQL templates, a generic interface and implementation struct suffixed with `Interface[T]` are created.
  - Methods in these interfaces implement the SQL template queries with parameter binding and context injection.

- **Model-Driven Field Helpers**
  - For each struct model, a variable with fields provides typed helpers (e.g., `field.String`, `field.Time`) for building queries and updates.

### Example Output Snippet

```go
func Query[T any](db *gorm.DB, opts ...clause.Expression) _QueryInterface[T] {
    return _QueryImpl[T]{
        Interface: gorm.G[T](db, opts...),
    }
}

type _QueryInterface[T any] interface {
    gorm.Interface[T]
    GetByID(ctx context.Context, id int) (T, error)
    FilterByNameAndAge(ctx context.Context, name string, age int)
}

// Fields helper for User struct
var User = struct {
    ID   field.Number[int]
    Name field.String
    Age  field.Number[int]
}{
    ID:   field.Number[int]{}.WithColumn("id"),
    Name: field.String{}.WithColumn("name"),
    Age:  field.Number[int]{}.WithColumn("age"),
}
```

## 5. How Success Looks

You have successfully run `gorm gen` when:

- No errors are reported in the CLI output.
- The output directory contains Go source files reflecting the interface and model names.
- Generated interfaces include your method signatures with implementations that call the proper query builders.
- Field helpers match your models with the correct field types.

<Tip>
Run `go build ./generated` or your main application using the generated code to quickly validate correctness.
</Tip>

## 6. Common Pitfalls and Troubleshooting

<AccordionGroup title="Troubleshooting Common Issues">
<Accordion title="Input Path Errors">
Make sure the path passed to `--input` exists and contains valid Go files. If it's a directory, it must include your interface files.
</Accordion>
<Accordion title="Missing Required Flags">
If you forget to specify the `--input (-i)` flag, the CLI will fail to run. This flag is mandatory.
</Accordion>
<Accordion title="Output Directory Permissions">
Ensure the output directory is writable, or the command will fail creating files.
</Accordion>
<Accordion title="Invalid SQL Template Comments">
Methods without valid SQL annotations may cause errors or generation failures. Always maintain properly formatted raw SQL comments.
</Accordion>
<Accordion title="Config File Issues">
If using package-level `genconfig.Config`, verify it does not exclude your interfaces or structs unintentionally, which would result in no generated methods or empty files.
</Accordion>
</AccordionGroup>

## 7. Next Steps

After successfully running the generator:

- Explore the generated APIs in your IDE or code editor to familiarize yourself with the fluent API.
- Integrate the generated code into your application’s data layer.
- Refer to **Validating a Successful Setup** in the Getting Started guide to confirm runtime correctness.
- Dive into configuration customization to fine-tune generation (see [Configuring Code Generation](./configuring-generation)).

---

## References

- [Configuring Code Generation](./configuring-generation) — Customize generation output
- [Initial Project Setup](./initial-project-setup) — Prepare your project for generation
- [Validating a Successful Setup](./validating-first-run) — Test the generated code
- [Common Setup and Generation Issues](./common-issues) — Troubleshooting
- [GORM CLI README](../../../README.md) — Complete usage and examples

<Source url="https://github.com/go-gorm/cli" paths={[{"path": "internal/gen/gen.go", "range": "1-44"},{"path": "internal/gen/generator.go", "range": "1-280"}]} />

---

This guide empowers you to confidently generate your first type-safe GORM query and model helpers with the `gorm gen` CLI command. Follow these instructions to integrate the generated code into your Go projects and unlock the benefits of compile-time safety and expressive queries.
