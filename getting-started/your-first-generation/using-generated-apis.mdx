---
title: "Using Generated APIs"
description: "Utilize your generated query APIs and field helpers to run actual queries and mutations. Sample usages demonstrate both simple and association-based queries for instant feedback."
---

# Using Generated APIs

Utilize your generated query APIs and field helpers to execute queries and perform mutations effortlessly. This guide demonstrates practical examples ranging from simple record retrieval to complex association manipulations, empowering you to interact with your database right away using the type-safe, fluent APIs generated by GORM CLI.

---

## 1. Accessing Generated Query Interfaces

When you run the generator, interfaces with raw SQL annotations and your model structs produce corresponding Go code in your output directory.

For example, given an interface:

```go
// Query interface with SQL templates
 type Query[T any] interface {
   // SELECT * FROM @@table WHERE id=@id
   GetByID(id int) (T, error)

   // Additional methods ...
}
```

After generation, you can access an instance of this interface with:

```go
q := generated.Query[User](db)
```

Here, `db` is your `*gorm.DB` connection, and `User` is your model struct type.

---

## 2. Running Basic Queries

Once you have the generated instance, you can call query methods directly. For example, fetching a user by ID:

```go
user, err := generated.Query[User](db).GetByID(ctx, 123)
if err != nil {
    // handle error
}
fmt.Printf("User Name: %s", user.Name)
```

This executes the SQL defined in the interface comment with full type safety.

---

## 3. Using Model-Driven Field Helpers for Fluent Conditions

Field helpers are generated for each model’s fields and associations, allowing you to build dynamic conditions easily.

Example: fetching all users with age above 18:

```go
users, err := gorm.G[User](db).
    Where(generated.User.Age.Gt(18)).
    Find(ctx)
if err != nil {
    // handle error
}
```

### Common predicates include:
- `Eq(value)` — equals
- `Gt(value)` — greater than
- `Lt(value)` — less than
- `Like(pattern)` — SQL LIKE pattern matching
- `Between(min, max)` — range filtering

Field helpers provide compile-time safety and autocompletion in your IDE.

---

## 4. Creating and Updating Records

Use the generic `gorm.G[T]` with `Set` to create or update records.

### Creating a new user with basic fields:

```go
err := gorm.G[User](db).
    Set(
        generated.User.Name.Set("alice"),
        generated.User.Age.Set(30),
        generated.User.IsAdult.Set(true),
    ).
    Create(ctx)
if err != nil {
    // handle error
}
```

### Updating an existing user:

```go
err := gorm.G[User](db).
    Where(generated.User.ID.Eq(123)).
    Set(
        generated.User.Name.Set("alice_updated"),
        generated.User.Age.Incr(1),
    ).
    Update(ctx)
if err != nil {
    // handle error
}
```

---

## 5. Working with Associations

The generator also creates dedicated helpers for associations such as `HasOne`, `HasMany`, `BelongsTo`, and `Many2Many`.

### Creating parent with an associated child record (Has Many):

```go
err := gorm.G[User](db).
    Set(
        generated.User.Name.Set("alice"),
        generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
    ).
    Create(ctx)
if err != nil {
    // handle error
}
```

### Updating associated records:

```go
err := gorm.G[User](db).
    Where(generated.User.ID.Eq(1)).
    Set(
        generated.User.Pets.
            Where(generated.Pet.Name.Eq("fido")).
            Update(generated.Pet.Name.Set("rex")),
    ).
    Update(ctx)
if err != nil {
    // handle error
}
```

### Unlinking associated records (removes link but keeps data):

```go
err := gorm.G[User](db).
    Where(generated.User.ID.Eq(1)).
    Set(generated.User.Pets.Unlink()).
    Update(ctx)
if err != nil {
    // handle error
}
```

### Deleting associated records:

```go
err := gorm.G[User](db).
    Where(generated.User.ID.Eq(1)).
    Set(generated.User.Pets.Delete()).
    Update(ctx)
if err != nil {
    // handle error
}
```

---

## 6. Using Template DSL Methods Generated from Interfaces

For interfaces with SQL templates in comments, the generator produces matching methods.

Example:

```go
users, err := generated.Query[User](db).FilterByNameAndAge(ctx, "jinzhu", 25)
if err != nil {
    // handle error
}
```

This calls the SQL template with binding parameters automatically handled.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Problems & Solutions">
<Accordion title="Generated Code Doesn't Compile">
Ensure your interfaces and model structs follow expected patterns and correct Go syntax. Check that your SQL templates in comments use the supported DSL and parameter binding syntax.
</Accordion>
<Accordion title="Queries Return No Results">
Verify your `Where` conditions and parameters correspond to actual data. Use logging to inspect the generated SQL.
</Accordion>
<Accordion title="Association Helpers Missing or Incorrect">
Confirm that association fields in your models are properly declared and recognized by GORM. The generator uses struct tags and field types to identify them.
</Accordion>
<Accordion title="Generator Produces No Files">
Check your generator input path and configuration filters (`IncludeInterfaces`, `ExcludeStructs`). Verify you are pointing to the correct package or directory.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps & Resources

- Explore the **[Model-Driven Field Helpers](https://yourdomain.com/guides/core-workflows/field-helpers-basics)** guide to deepen your understanding of predicate and update operations.
- Learn advanced query templating in **[Template-Based Query Generation](https://yourdomain.com/guides/advanced-patterns/template-based-sql)**.
- Understand association operations better in **[Working with Associations](https://yourdomain.com/guides/advanced-patterns/working-with-associations)**.
- Review the **[Quickstart User Journey](https://yourdomain.com/overview/features-and-workflows/quickstart-user-journey)** for a full pipeline from model definition to usage.

---

## 9. Sample Workflow Recap

```go
// Get a user by ID
user, err := generated.Query[User](db).GetByID(ctx, 123)
if err != nil { /* handle error */ }

// Create a new user and add a pet
err = gorm.G[User](db).
    Set(
        generated.User.Name.Set("alice"),
        generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
    ).
    Create(ctx)

// Update user's age
err = gorm.G[User](db).
    Where(generated.User.ID.Eq(123)).
    Set(generated.User.Age.Set(31)).
    Update(ctx)

// Unlink all user's pets
err = gorm.G[User](db).
    Where(generated.User.ID.Eq(123)).
    Set(generated.User.Pets.Unlink()).
    Update(ctx)
```

Execute these patterns to quickly and safely interact with your database using generated, type-safe APIs.

---

<!-- Related Documentation Links -->

[Core Concepts & Terminology](https://yourdomain.com/overview/architecture-and-core-concepts/core-concepts-terminology) | [Quickstart User Journey](https://yourdomain.com/overview/features-and-workflows/quickstart-user-journey) | [Configuration & Extensibility](https://yourdomain.com/overview/features-and-workflows/configuring-generation)

<Source url="https://github.com/go-gorm/cli" branch="main" paths={[{"path": "internal/gen/generator.go", "range": "1-626"},{"path": "internal/gen/generator_test.go", "range": "1-114"}]} />
