---
title: "Run the Code Generator"
description: "Step-by-step process for invoking the CLI to generate code, including command syntax, input/output path configuration, and what to expect in your generated files. Includes a sample end-to-end command and output overview."
---

# Run the Code Generator

This guide walks you through the complete process of running the GORM CLI code generator to transform your Go interfaces with SQL templates and model structs into type-safe, fluent GORM APIs. It covers command usage, configuration of input/output paths, step-by-step execution, and what output to expect in your generated files.

---

## 1. Prerequisites Before Running the Generator

Before you invoke the code generator, ensure the following:

- You have Go 1.18 or later installed and properly configured in your environment.
- You have written your query interfaces with SQL template annotations and your model structs according to the [Define Models & Query Interfaces](https://gorm.io/cli/docs/getting-started/first-generation/define-models-interfaces) guide.
- The Go file or directory containing your interfaces and models is ready and accessible.
- If you use custom generation configuration via `genconfig.Config`, ensure those are declared in the respective package.

<Tip>
You only need to generate code for packages or files that include your interfaces and models. The CLI will detect package-level `genconfig.Config` declarations to override generation defaults automatically.
</Tip>

---

## 2. Basic Command Syntax

Run the GORM CLI code generator with the following command structure:

```bash
gorm gen -i <input_path> -o <output_path>
```

- `-i, --input`: Required. The path to your Go source file or directory containing the interfaces and models with SQL annotations.
- `-o, --output`: Optional. Directory where generated code files will be saved. Defaults to `./g` if omitted.

### Example

Generate code for interfaces and models in the `./examples` directory, outputting to `./generated`:

```bash
gorm gen -i ./examples -o ./generated
```

This command will parse all Go files in `./examples`, apply any package-level generation configuration, and write generated code preserving relative directory structure under `./generated`.

<Check>
Make sure the `gorm` CLI tool is installed and available in your system PATH. Run `gorm version` to verify installation.
</Check>

---

## 3. Step-by-Step Code Generation Process

<Steps>
<Step title="Step 1: Prepare your interfaces with SQL templates and model structs">
Ensure your Go code defines query interfaces with embedded SQL templates in comments, plus model structs with appropriate fields and tags. See [Define Models & Query Interfaces](https://gorm.io/cli/docs/getting-started/first-generation/define-models-interfaces) for detailed instructions.
</Step>

<Step title="Step 2: (Optional) Create generation configuration">
If you need customizations like output paths, type mappings, or filtering of interfaces/structs, declare a package-level `genconfig.Config` struct in your package following [Configuration Basics](https://gorm.io/cli/docs/getting-started/setup-installation/configuration-basics).
</Step>

<Step title="Step 3: Run the generator with the input and output paths">
Execute the CLI command with `-i` set to your interface/model source, and `-o` set to your desired output folder:

```bash
gorm gen -i ./path/to/your/package -o ./generated
```

Processing will recursively traverse files if a directory is specified.
</Step>

<Step title="Step 4: Generator output and logging">
During generation, you will see output messages indicating each generated file:

```
Generating file ./generated/models/user_gen.go from ./path/to/your/package/user.go...
```

Successful generation results in complete Go source files containing:
- Query API interfaces and implementations.
- Model-driven field helpers.

The directory structure under output mirrors your input directory structure by default.
</Step>
</Steps>

---

## 4. Understanding Generated Files

The generator produces one or more Go files containing:

- Concrete implementations of your query interfaces with embedded SQL templates transformed into calls using GORM.
- Strongly typed field helper structs that simplify building predicates, updates, and association operations.
- Package-level variables representing models for type-safe, discoverable query construction.

Generated files honor your package structure and respect any customizations from a `genconfig.Config` file.

<Tip>
Generated files contain a `// Code generated by 'gorm.io/cli/gorm'. DO NOT EDIT.` header to indicate they are automatically created and should not be manually modified.
</Tip>

---

## 5. Example Full Workflow

Below is an end-to-end sample of running the generator and what you can expect.

1. Your directory structure:

```text
examples/
  models/user.go
  query.go
```

2. Your query interface snippet (e.g. `query.go`):

```go
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) (User, error)
```

3. Run the generation command:

```bash
gorm gen -i ./examples -o ./generated
```

4. Output messages:

```
Generating file ./generated/models/user_gen.go from ./examples/models/user.go...
Generating file ./generated/query_gen.go from ./examples/query.go...
```

5. Use generated APIs in your application:

```go
user, err := generated.Query[User](db).GetByID(ctx, 123)
```

---

## 6. Customizing Code Generation

You can tailor generation by placing a `genconfig.Config` struct instance inside your package source. This lets you:

- Override output directory (`OutPath`).
- Map Go types or field tags to custom field helper types.
- Filter interfaces and structs included or excluded via patterns.
- Enable file-level vs package-level scoping.

Example configuration:

```go
package examples

import "gorm.io/cli/gorm/genconfig"

var _ = genconfig.Config{
    OutPath: "generated",
    FieldNameMap: map[string]any{
        "json": JSON{}, // map `gen:"json"` tag fields to JSON helper
    },
    IncludeInterfaces: []any{"Query*"},
    ExcludeStructs: []any{"*DTO"},
}
```

See [Configuration Basics](https://gorm.io/cli/docs/getting-started/setup-installation/configuration-basics) for more details.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Code Generation">
<Accordion title="Input path not found or empty">
Verify the path provided to `-i` is correct and contains Go files with the expected query interfaces and models.
</Accordion>
<Accordion title="No interfaces or structs detected">
Ensure your interfaces have SQL templates within method comments and your structs are exported with public fields. Missing or improperly formatted SQL annotations will skip generation.
</Accordion>
<Accordion title="Generated code fails to build or format">
Check the Go environment is properly configured and all dependent packages are installed. Run `go mod tidy` and verify your imports.
</Accordion>
<Accordion title="Unexpected files not generated">
Review any `genconfig.Config` settings that might exclude interfaces or structs based on patterns. Remove or adjust filters.
</Accordion>
<Accordion title="Permissions or write errors on output directory">
Make sure you have write permissions for the target output directory. Ensure no other process locks generated files.
</Accordion>
</AccordionGroup>

---

## 8. Next Steps After Code Generation

- Import and use the generated query APIs and model helpers in your application code to build type-safe query logic.
- Explore [Using Generated APIs](https://gorm.io/cli/docs/guides/getting-started/using-generated-apis) for detailed usage patterns.
- Validate generated code with [Validate Generated APIs](https://gorm.io/cli/docs/getting-started/first-generation/validate-generated-apis).
- Customize further with [Configuration & Customization](https://gorm.io/cli/docs/overview/quick-features/customization-overview).

---

## 9. Reference Links

- [Define Models & Query Interfaces](https://gorm.io/cli/docs/getting-started/first-generation/define-models-interfaces)
- [Configuration Basics](https://gorm.io/cli/docs/getting-started/setup-installation/configuration-basics)
- [Quickstart Workflow](https://gorm.io/cli/docs/overview/quick-features/quickstart)
- [Validate Generated APIs](https://gorm.io/cli/docs/getting-started/first-generation/validate-generated-apis)
- [Troubleshooting Common Issues](https://gorm.io/cli/docs/getting-started/first-generation/troubleshooting-common-issues)

---

By following this guide, you can confidently generate GORM CLI code that is both type-safe and maintainable, accelerating your Go project development with GORM.
