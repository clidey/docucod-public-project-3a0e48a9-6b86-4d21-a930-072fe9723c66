---
title: "Your First Code Generation"
description: "Guides users through authoring a simple query interface and model, running the generator, and understanding the generated outputs. Details the recommended initial workflow and includes clear expectations of CLI output and generated files."
---

# Your First Code Generation

Welcome to your first hands-on experience with GORM CLI's code generation. This guide walks you through authoring a simple query interface alongside your model definitions, running the generation command, and understanding the generated code's outputs. By following the recommended initial workflow, you'll gain clarity on expected CLI responses and familiarize yourself with the structure of the generated files.

---

## 1. Prepare Your Query Interface and Model

The core of GORM CLI's power lies in generating type-safe query APIs from Go interfaces annotated with SQL templates, paired with model-driven field helpers. Begin by creating a basic query interface and defining your data model.

### Steps:

1.1 Define a generic query interface in your Go package. Include method signatures documented with SQL templates using the special DSL syntax.

```go
// examples/query.go
package examples

type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)

  // SELECT * FROM @@table WHERE @@column=@value
  FilterWithColumn(column string, value string) (T, error)

  // Additional example method with conditional SQL
  // SELECT * FROM users
  // {{if user.ID > 0}}
  //     WHERE id=@user.ID
  // {{else if user.Name != ""}}
  //     WHERE name=@user.Name
  // {{end}}
  QueryWith(user User) (T, error)
}
```

1.2 Define your model struct in the same or an adjacent package. Use exported fields and standard Go struct tags to define your schema.

```go
// examples/models/user.go
package models

type User struct {
  ID   int
  Name string
  Age  int
}
```

<Tip>
For smooth generation, keep your interface and related model in the same module or package directory and ensure your model fields align with your SQL templates.
</Tip>

## 2. Run the Code Generator

With your interface and model in place, the next step is to execute the GORM CLI generator.

### Steps:

2.1 Open your terminal and navigate to the root directory containing your Go files.

2.2 Run the generation command, specifying the input directory or file and the output directory for generated code:

```bash
gorm gen -i ./examples -o ./generated
```

- `-i` or `--input`: Path to the Go interface file or directory with your interfaces and models.
- `-o` or `--output`: Directory where the generated files will be placed.

2.3 Observe the CLI output:

```text
Generating file ./generated/query.go from ./examples/query.go...
```

This indicates successful generation and the location of output.

<Check>
If you encounter errors such as "input file not specified" or parse failures, verify that your input path is correct and your Go files are syntactically valid.
</Check>

## 3. Understand the Generated Code Structure

Upon successful generation, explore the output directory. The generator creates Go source files embodying:

- **Type-safe query API implementations** matching your interface methods.
- **Field helpers** for your models' fields, supporting filters, updates, and association operations.

### Generated Query Interface Code

- Each interface method is transformed into a concrete method with SQL execution logic, handling context injection automatically.
- Methods with SQL annotations produce code that constructs SQL statements dynamically and execute queries with type safety.

### Generated Model Field Helpers

- Each model field (basic types like int, string, time.Time) generates fluent helpers such as `Eq()`, `Like()`, `Between()`.
- Associations (if defined) get dedicated builder methods for `Create()`, `Update()`, `Unlink()`, and `Delete()`.

<Note>
Generated files include clear comments and maintain idiomatic Go formatting to integrate easily into your project.
</Note>

## 4. The Recommended Initial Workflow

1. **Develop your query interface methods** with well-structured SQL templates.
2. **Define your model structs** reflecting your database tables.
3. **Run the generator** to produce code and verify CLI output correctness.
4. **Inspect generated files** for the API and field helper structures.
5. **Integrate generated code** by importing the output package in your Go project.
6. **Use generated query APIs** in your application code with fluent, type-safe calls.

<Tip>
Start simple: begin by generating code for just one or two interfaces and models to verify your setup before expanding.
</Tip>

## 5. Example: Using Generated Code

After generation, an example usage might look like this:

```go
import (
  "context"
  "gorm.io/gorm"
  "your_project/generated"
)

func fetchUser(db *gorm.DB, ctx context.Context, id int) (models.User, error) {
  return generated.Query[models.User](db).GetByID(ctx, id)
}
```

This call executes the generated `GetByID` query, using the type-safe method derived from your interface.

## 6. Common Pitfalls and Tips

- **Ensure your interface methods follow expected signatures:** At least one return value with error as the last return.
- **SQL templates must be valid:** Comments used for SQL should be correctly formatted and tested.
- **Keep model and interface packages synchronized:** Helps discovery and import path correctness.
- **Watch CLI output for warnings or skips:** Files already generated are often skipped to avoid cycles.

<Warning>
Modifying generated files directly is discouraged; instead, adjust your interfaces/models and regenerate.
</Warning>

## 7. Next Steps

After mastering your first code generation, explore:

- [Using Generated APIs](getting-started-onboarding-core-using-generated-apis.md) to learn how to leverage the full power of generated query methods.
- [Basic Configuration](getting-started-onboarding-core-basic-configuration.md) to customize generation behavior.
- [Template-Based Queries](guides-core-usage-patterns-template-based-queries.md) for crafting advanced SQL templates.

---

Explore the full power of GORM CLI to write safer, cleaner, and more productive Go database code.

---

<Source url="https://github.com/go-gorm/cli" branch="main" paths={[{"path": "examples/query.go", "range": "1-41"}, {"path": "internal/gen/gen.go", "range": "10-53"}]} />

