---
title: "Generating Code with GORM CLI"
description: "Guides the user through running the generator on their code. Explains input/output directory options and what generated files to expect. Connects command-line options to resulting files."
---

# Generating Code with GORM CLI

This guide walks you through running the GORM CLI code generator on your Go project. It explains how to specify input and output directories, what files the generator creates, and how command-line options influence the generated code structure and location.

---

## 1. Understanding the Generator Workflow

GORM CLI generates two main artifacts from your source code:

- **Query API Implementations**: Concrete, type-safe code from your Go interfaces with embedded SQL templates.
- **Field Helpers**: Strongly typed helpers generated from your model structs to ease building conditions and updates.

The generator uses the package-level configuration (if declared) to customize output locations and mappings.

---

## 2. Preparing Your Input

### What to Provide as Input

- Your **Go source directory or file** containing:
  - Interfaces that define SQL template methods.
  - Models that represent your database tables.
  - Optional package-level `genconfig.Config` literals to customize generation.

### Example Input Structure

```plaintext
myproject/
 ├─ models/
 │    └─ user.go          # model structs
 ├─ queries/
 │    └─ query.go         # query interfaces with SQL templates
 └─ ...
```

Use the path to the directory or specific file with your interfaces (`query.go`) as the input parameter.

---

## 3. Running the Generator

Use the `gorm gen` command with the required `-i` (input) flag and optional `-o` (output) flag.

### Command Syntax

```bash
gorm gen -i <input-path> [-o <output-path>]
```

- `-i, --input`: Path to the input directory or Go file where your query interfaces reside.
- `-o, --output`: Target directory for the generated code (defaults to `./g`).

### Quick Example

```bash
gorm gen -i ./examples -o ./generated
```

This command processes Go files under `examples` to generate code files into the `generated` directory.

---

## 4. Output Directory and File Structure

### Default Output

If you omit `-o`, generated files appear under the default directory `./g` relative to the current working directory.

### Package-level Output Override

If your input package includes a declaration of `genconfig.Config` with an `OutPath` field, the generator uses that configured output path **instead of** the CLI-supplied or default `-o` path for files in that package.

Example snippet:

```go
var _ = genconfig.Config{
  OutPath: "examples/output",
  // other config fields
}
```

This directs generated files from that package into `examples/output`.

### Relative Directory Preservation

The generator preserves directory structure relative to your input path. If you specify `-i ./examples`, the output will mirror the input's internal subdirectory layout beneath the output root.

---

## 5. Generated Files and Code Contents

The generator produces Go source files containing:

- **Concrete implementations** of your query interfaces.
- **Helper variable structs** representing your model's fields.

Example generated snippet:

```go
// Code generated by 'gorm.io/cli/gorm'. DO NOT EDIT.
package generated

import (
  "gorm.io/gorm"
  "gorm.io/gorm/clause"
  "gorm.io/cli/gorm/field"
  // other imports
)

// Query interface implementation
func Query[T any](db *gorm.DB) QueryInterface[T] { /* ... */ }

// Field helpers for User model
var User = struct {
  ID    field.Number[uint]
  Name  field.String
  // ...
}{
  ID: field.Number[uint]{}.WithColumn("id"),
  Name: field.String{}.WithColumn("name"),
}
```

This code allows you to execute typed queries and build filters fluently in Go with compile-time safety.

---

## 6. How Command-Line Options Map to Outputs

| Option              | Effect on Generated Code                                       |
|---------------------|---------------------------------------------------------------|
| `-i` (Input)        | Sets source files/directories to scan for interfaces/models.  |
| `-o` (Output)       | Sets root directory where generated files are saved.          |
| `genconfig.Config.OutPath` | Overrides CLI `-o` for files in that package.             |

The generator respects package-level configuration files first, then falls back to CLI flags.

---

## 7. Example Walkthrough

### Step 1: Define Interface and Models

```go
// examples/query.go
package examples

type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)
}

// examples/models/user.go
package models

type User struct {
  ID int
  Name string
}
```

### Step 2: Run Generation

```bash
gorm gen -i ./examples/query.go -o ./generated
```

### Step 3: Validate Output

- Check `./generated/examples/query.go` (or similar) for generated code files.
- Look for `Query[User]` implementations and `User` field helpers.

---

## 8. Troubleshooting

- **Issue**: No generated files appear.
  - Ensure `-i` points to correct source files containing query interfaces.
  - Confirm interfaces have annotated SQL comments.
  - Check for config `IncludeInterfaces`/`ExcludeInterfaces` filters.

- **Issue**: Output files generate in unexpected directories.
  - Verify if your package declares `genconfig.Config` with `OutPath` that overrides CLI `-o`.
  - Confirm relative input paths and output root.

- **Issue**: Conflicts or stale code.
  - Delete old generated directories and retry.
  - Confirm Go version compatibility (requires Go 1.18+).

For further assistance, consult the [Troubleshooting](../../../getting-started/troubleshooting/common-errors) section.

---

## 9. Related Links

- [Defining Models & Query Interfaces](/getting-started/initial-usage/defining-models-interfaces) - Learn how to annotate and prepare your Go code for generation.
- [Quickstart Workflow](/overview/architecture-usage-integration/quickstart-workflow) - End-to-end example of using the GORM CLI.
- [Configuration Basics](/getting-started/initial-usage/configuration-basics) - Customize generation with `genconfig.Config`.
- [SQL Template DSL & Best Practices](/guides/workflows-real-world-usage/sql-templates-and-dsl-best-practices) - Writing effective SQL templates.

---

By following this guide, you will seamlessly generate type-safe, fluent query APIs and field helpers that integrate perfectly with GORM projects, boosting your productivity and minimizing runtime errors.