---
title: "Generate Code with the CLI"
description: "Step-by-step walkthrough for using `gorm gen` to generate type-safe APIs and field helpers from your models and interfaces. Explains core CLI flags, inputs, outputs, and what to expect from a successful run."
---

# Generate Code with the CLI

A step-by-step walkthrough for using `gorm gen` to generate type-safe APIs and field helpers from your models and interfaces. This guide explains the core CLI flags, required inputs, expected outputs, and how to interpret a successful generation run.

---

## 1. Overview

The `gorm gen` command is the core entry point for generating your type-safe query APIs and model-driven field helpers. It reads Go source files defining interfaces annotated with SQL templates and associated model structs, then produces strongly typed Go code that can be used seamlessly with GORM.

This page focuses on using the CLI command, its flags, inputs, outputs, and what to expect during and after a successful run.

---

## 2. Prerequisites

Before generating code, ensure the following:

- You have Go 1.18+ installed and set up (necessary for generics support).
- Your project includes Go interfaces annotated with SQL templates (in comments) and your model structs.
- The `gorm` CLI tool is installed (`go install gorm.io/cli/gorm@latest`).
- You have access to your Go source directory or files containing the interfaces.

---

## 3. CLI Command & Flags

To generate code, use the `gorm gen` CLI command. It is invoked under the `gorm` tool as a subcommand:

```bash
gorm gen -i <input-path> -o <output-dir>
```

### Core Flags

- `-i, --input` (required): Path to the Go source file or directory containing your interface(s) annotated with SQL templates.
- `-o, --output`: Destination directory for the generated code. Defaults to `./g` if omitted.

### Example

Generate code from the `examples` directory and output to `generated`:

```bash
gorm gen -i ./examples -o ./generated
```

---

## 4. Step-by-Step Instructions

### Step 1: Prepare Your Interface File(s)

Write one or more Go interfaces with SQL template annotations in comments. These interfaces define your query methods using a special DSL in comments.

Example interface snippet:

```go
// Query[T any] interface with SQL templates
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) (T, error)
```

Place these interfaces and related model structs in the same package or directory.

### Step 2: Run the Generator

From your terminal, run:

```bash
gorm gen -i ./path/to/interfaces -o ./output/dir
```

### Step 3: Observe CLI Output

During the run, you will see logs indicating generated files and processed inputs. For example:

```
Generating file ./output/dir/query.go from /path/to/interfaces/query.go...
```

This confirms successful generation.

### Step 4: Verify Generated Code

Check the output directory for generated Go files. These files include:

- Typed Query API implementations
- Strongly typed model field helpers

Example generated API usage:

```go
user, err := generated.Query[User](db).GetByID(ctx, 123)
```

---

## 5. What Happens During Generation

The CLI processes files as follows:

- Parses your Go source files and inspects interfaces.
- Extracts SQL templates from comments, validating syntax.
- Parses model struct definitions to create field helpers.
- Applies your configuration if present (optional).
- Writes output Go files with type-safe concrete query implementations.

The generator ensures all generated code compiles with Go generics for type safety and integrates with `gorm.io/gorm`.

---

## 6. Common CLI Flags Summary

| Flag         | Shortcut | Description                                   | Default  |
|--------------|----------|-----------------------------------------------|----------|
| `--input`    | `-i`     | Path to Go interface file or directory (required) | none     |
| `--output`   | `-o`     | Output directory for generated code           | `./g`    |

---

## 7. Troubleshooting

### Error: Missing `input` Flag

**Issue**: The CLI refuses to run because no input path is specified.

**Solution**: Always specify the `-i` or `--input` flag with the path to your interfaces.

---

### Error: Parsing Failures

**Issue**: The generator reports it cannot parse your interface file.

**Solution**:
- Confirm the input path points to valid Go `.go` files.
- Ensure interfaces contain valid Go syntax and correct SQL annotations.
- Verify Go modules are initialized and dependencies resolved.

---

### Unexpected Empty Output Directory

**Issue**: No files generated despite a successful run.

**Solution**:
- Check for presence of `genconfig.Config` filters that may exclude your interfaces or structs.
- Confirm your input files contain interfaces matching your configuration.
- Confirm that interfaces are annotated with recognized SQL templates.

---

## 8. Best Practices & Tips

- **Keep your interfaces and models organized together**: This helps the generator locate related elements correctly.
- **Use SQL comment templates consistently**: Proper `SELECT`, `UPDATE`, `WHERE`, `SET`, and Go struct mappings ensure full generation.
- **Leverage configuration**: To customize output paths, field mappings, or include/exclude specific interfaces and structs, use `genconfig.Config` in your packages.
- **Keep Go generics enabled**: GORM CLI requires Go 1.18+ to handle generic types.

---

## 9. Next Steps

After a successful code generation:

- Import the generated package in your project.
- Use the generated query APIs to perform typesafe database operations.
- Explore writing advanced SQL templates to customize queries.
- Review guides on model-driven field helpers and association handling.

Relevant documentation links:

- [Writing Template-based Queries](../guides/core-workflows/template-queries-quickstart.md)
- [Basic Generator Configuration](../getting-started/project-initialization/basic-configuration.md)
- [Using the Generated APIs in Real Projects](../guides/core-workflows/using-generated-apis.md)

---

## 10. Example CLI Usage

```bash
# Generate code from the 'examples' directory, output to 'generated'
gorm gen -i ./examples -o ./generated

# Generate from a single interface file
gorm gen -i ./examples/query.go
```

---

## 11. Summary

Using `gorm gen` enables you to instantly generate fully type-safe, idiomatic Go APIs and helpers for all your GORM models and SQL-annotated interfaces. This reduces boilerplate and enhances runtime safety by moving checks to compile time.

Follow this guide step-by-step to invoke the CLI, understand its flags, verify outputs, and troubleshoot common issuesâ€”setting you on a fast path to productive, safe database access with GORM CLI.

---

## Further Reading

- [GORM CLI Installation Guide](../getting-started/setup/installation.md)
- [Create Models and Query Interfaces](../getting-started/project-initialization/first-query-interface.md)
- [Generation Configuration Options](../guides/advanced-features-patterns/customizing-generation-config.md)
- [Handling Associations in Generated APIs](../guides/advanced-features-patterns/association-operations.md)


<Check>
Make sure your input files contain interfaces with valid SQL template comments and your models have proper struct definitions to maximize generation utility.
</Check>
