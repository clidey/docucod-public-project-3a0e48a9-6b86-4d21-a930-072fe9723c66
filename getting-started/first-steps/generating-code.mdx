---
title: "Generating Code"
description: "Guides users through running the GORM CLI to generate type‑safe query APIs and model-driven field helpers for their project. Explains command usage, input/output structure, and what artifacts to expect after a successful run."
---

# Generating Code with GORM CLI

This guide helps you run the GORM CLI `gen` command to generate the type-safe query APIs and model-driven field helpers essential for your project. You will learn about CLI command usage, the expected input/output structure, and the code artifacts produced after a successful generation.

---

## 1. Overview

The `gorm gen` command reads your Go interfaces annotated with SQL templates and your Go model structs to generate:

- **Interface-driven, type-safe query APIs** that provide compile-time checked CRUD and complex queries
- **Model-driven field helpers** for efficient filters, updates, and association operations

This generation leverages your existing codebase and configuration to produce strongly typed code that integrates seamlessly with GORM.

<Tip>
Run the code generation step whenever you create or update your query interfaces or models to keep generated APIs in sync.
</Tip>

---

## 2. Prerequisites

- You have installed the GORM CLI tool (`gorm`) with Go 1.18+
- You have defined at least one Go interface containing raw SQL template annotations (via comments) representing your query methods
- Your Go models (structs) are defined clearly with exported fields and any optional `gen` tags or configuration
- You know the path (directory or file) to your query interfaces

If you haven't yet installed the tool or configured your project, see the [Installation](https://gorm.io/docs/getting-started/setup-prerequisites/installation) and [Project Configuration](https://gorm.io/docs/getting-started/first-steps/project-configuration) guides.

---

## 3. Running the Generator

### 3.1 Command Overview

Use the `gorm gen` command to run code generation:

```bash
gorm gen -i <input-path> -o <output-path>
```

- `-i, --input` (required): Path to the Go interface file or directory containing your raw SQL annotated interfaces
- `-o, --output`: Directory where generated files will be placed (default: `./g`)

### 3.2 Example

Assuming your interfaces are under the `./examples` directory and you want generated code in `./generated`:

```bash
gorm gen -i ./examples -o ./generated
```

### 3.3 What Happens Internally

- The tool parses your Go files, reading interfaces and their SQL annotations
- It reads your model structs (including any relevant configs via package-level `genconfig.Config`)
- It generates typed query interface implementations and field helpers reflecting your definitions
- Generated files keep their directory structure under the output path

### 3.4 Output Structure

- Generated Go files mirror your package directory structure inside the output directory
- Each output Go file includes:
  - Definitions of the interface implementations with methods for your SQL queries
  - Generated model-driven helpers for fields and associations

<Tip>
You can omit the output flag to generate code in the default `./g` directory if you prefer.
</Tip>

---

## 4. Step-by-Step Walkthrough

### Step 1: Prepare Your SQL Interfaces and Models

Ensure your interfaces contain methods with raw SQL templates annotated in Go comments, for example:

```go
// examples/query.go

// Query interface defines queries with SQL templates in comments
//
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) (T, error)
```

Your models (structs) should be defined, optionally using configuration or tags:

```go
// examples/models/user.go

type User struct {
  ID   uint
  Name string
  Age  int
}
```

### Step 2: Execute the Generation Command

Run the CLI command with your interface file or directory:

```bash
gorm gen -i ./examples -o ./generated
```

You will see output lines such as:

```
Generating file ./generated/query.go from ./examples/query.go...
```

### Step 3: Verify Generated Files

Navigate to your output directory (`./generated`) and confirm files exist, for example:

```
./generated/query.go
./generated/user.go
```

Open these files to see generated query implementations and field helpers for your models.

### Step 4: Use Generated APIs in Your Code

Import the generated package and call generated queries like:

```go
u, err := generated.Query[User](db).GetByID(ctx, 123)
```

Use field helpers for where clauses and updates:

```go
users, err := gorm.G[User](db).Where(generated.User.Age.Gt(18)).Find(ctx)
```

---

## 5. Command Flags Details

| Flag           | Shorthand | Description                                      | Required | Default |
|----------------|-----------|------------------------------------------------|----------|---------|
| `--input`      | `-i`      | Path to interface file or directory             | Yes      | None    |
| `--output`     | `-o`      | Directory for generated code                     | No       | `./g`   |

---

## 6. Common Pitfalls & Troubleshooting

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Input Not Recognized or No Interfaces Found">
Make sure the input path points to Go files that contain interfaces with correctly formatted raw SQL template comments. The CLI requires the `-i` flag with a valid path.
</Accordion>
<Accordion title="Output Directory Is Not Created or Code Not Found">
Ensure you have write permissions to the output directory. The generator creates directories recursively but will fail silently if permissions are inadequate. Use `-o` to specify an absolute path if needed.
</Accordion>
<Accordion title="Error: Method Missing Return Values or Has Invalid Signature">
Every query method with a raw SQL template must return at least an error, with a maximum of two return values (data + error). Confirm method signatures comply.
</Accordion>
<Accordion title="Generated Code Fails To Compile">
Check for missing dependencies or misconfigured imports in your project. The generator formats and runs the `goimports` tool post-generation, but ensure your environment is correctly set up.
</Accordion>
</AccordionGroup>

<Note>
If generation fails with parsing errors, validate that your SQL template comments follow GORM CLI’s DSL and syntax exactly (see the [SQL Template DSL](https://gorm.io/docs/overview/intro-value/what-is-gorm-cli#template-based-queries) documentation).
</Note>

---

## 7. What’s Next?

- Explore the [Using Type-Safe Query APIs](https://gorm.io/docs/guides/core-workflows/using-type-safe-query-apis) guide to learn how to leverage generated query interfaces in practice.
- Customize generation behavior through `genconfig.Config` as described in the [Project Configuration](https://gorm.io/docs/getting-started/first-steps/project-configuration) guide.
- For complex query templates, refer to the [SQL Template DSL](https://gorm.io/docs/overview/intro-value/feature-overview#template-based-queries) documentation.

---

## 8. Additional Tips

- Keep your interface files and model structs well-organized; the generator uses path-based context to apply configurations automatically.
- Include comments directly above each interface method with your SQL templates for accurate code generation.
- Use the default output directory during early experimentation, then transition to a custom output path for project integration.

---

By following this guide, you will produce bootstrapped, ready-to-use GORM query APIs and helpers that increase type safety and developer productivity in your Go projects.

---

## References

- [Installation Guide](https://gorm.io/docs/getting-started/setup-prerequisites/installation)
- [Project Configuration](https://gorm.io/docs/getting-started/first-steps/project-configuration)
- [What is GORM CLI?](https://gorm.io/docs/overview/intro-value/what-is-gorm-cli)
- [Feature Overview](https://gorm.io/docs/overview/intro-value/feature-overview)
- [SQL Template DSL](https://gorm.io/docs/overview/intro-value/feature-overview#template-based-queries)
- [Troubleshooting Common Issues](https://gorm.io/docs/getting-started/troubleshooting/common-issues)

---

## Example Quick Command

```bash
# Generate code from your interfaces under ./examples into ./generated
gorm gen -i ./examples -o ./generated
```

Use this command as your starting point each time you update your query interfaces or models to keep your generated code in sync.
