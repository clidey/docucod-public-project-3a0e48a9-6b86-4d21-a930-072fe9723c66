---
title: "Generate Type-Safe Code"
description: "Run the CLI to generate query APIs and field helpers from your code. Covers the default CLI commands, typical output, and interpreting any generation errors."
---

# Generate Type-Safe Code with GORM CLI

Run the GORM CLI tool to generate type-safe query APIs and model-driven field helpers directly from your Go interfaces and structs. This guide covers how to use the default CLI commands, what typical output looks like, and how to interpret and resolve generation errors.

---

## 1. Prerequisites and Preparation

Before running the generator, ensure:

- You have defined **Go interfaces** with method comments containing your SQL templates.
- Your **model structs** reside in the same package or directory (or imported packages).
- Your Go environment is set up with Go 1.18+ (generics support).
- Any optional configuration via `genconfig.Config` (like output path or type mappings) is declared in the package to influence generation.

<Tip>
If you haven't yet created your query interfaces or models, see the [Initialize Your Project](getting-started/first-steps/initialize-your-project) guide first.
</Tip>

## 2. Running the CLI Command

The core command to generate code is the `gorm gen` subcommand of the CLI tool.

### Basic Command Structure

```bash
gorm gen -i <input_path> -o <output_path>
```

- `-i, --input`: Required. Path to your Go file or directory containing your SQL-annotated interfaces.
- `-o, --output`: Optional. Directory where generated Go files will be placed (default `./g`).

### Example

```bash
gorm gen -i ./examples -o ./generated
```

This scans the `./examples` directory, processes annotated interfaces and structs, and writes generated code to `./generated`.

### Flags and Options

| Flag          | Description                                           | Default | Required |
| ------------- | -----------------------------------------------------|---------|----------|
| `-i, --input` | Path to Go interface file or directory to process    | N/A     | Yes      |
| `-o, --output`| Output directory for generated code                   | `./g`   | No       |

<Tip>
Set your input path precisely to target your annotated interfaces to avoid scanning unnecessary files.
</Tip>

## 3. Understanding the Generated Output

When the generation completes successfully, you will see output files typically structured similarly to your input directory but placed under the specified output path.

### Typical File Contents

- **Query API Implementations:** Concrete implementations of your declared query interfaces, with methods that execute type-safe, parameter-bound SQL statements.
- **Field Helpers:** Generated variables and structs that provide typed fields for filtering, updating, and manipulating your models and associations.

### Example Output Overview

If you generated from interfaces defining a `Query[T any]` interface, you will find:

```go
// generated package

func Query[T any](db *gorm.DB, opts ...clause.Expression) QueryInterface[T] {
    return QueryImpl[T]{...}
}

var User = struct {
    ID field.Number[uint]
    Name field.String
    Age field.Number[int]
    // ... other fields and relations
}{
    ID: field.Number[uint]{}.WithColumn("id"),
    // ...
}
```

This lets you use strongly typed function calls like:

```go
u, err := generated.Query[User](db).GetByID(ctx, 123)
```

or

```go
db.Where(generated.User.Age.Gt(18)).Find(ctx)
```

## 4. Generation Success and Errors

### Successful Generation

- Console logs confirm file paths and names for generated files.
- No error messages appear.
- Generated files compile without errors in your Go project.

### Common Error Causes

- **Missing or malformed SQL templates:** Method comments must include valid SQL-like annotations.
- **Return type mismatches:** Methods must return error as the last result parameter; one or two return values only.
- **Incorrect input paths:** Passing directories or files that donâ€™t contain valid interfaces.
- **Config conflicts:** Inclusion/exclusion filters in `genconfig.Config` incorrectly filtering out interfaces or structs.

<Tip>
If generation fails, carefully read console error messages; they precisely indicate method and file locations needing correction.
</Tip>

### Example Error Message

```
Method Query.GetByID: finish method must return at least one value (last return value must be error)
```

This indicates a method lacks proper return type declarations.

## 5. Verifying Generated Code

After generation:

1. Inspect generated files for the expected interface implementations and field helpers.
2. Run `go build ./...` or your usual test commands to verify syntactic correctness.
3. Try running a minimal code snippet invoking generated APIs (see 'First Operation Walkthrough' in Quickstart).

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Generation Problems and Solutions">
<Accordion title="No Output Files Are Generated">
- Ensure your input path contains interfaces annotated with SQL comment templates.
- Check any include/exclude rules in `genconfig.Config` for unintended filtering.
- Verify the generator runs without a silent error.
</Accordion>
<Accordion title="Method Return Types Are Invalid">
- Check your interface method signatures. The last return value must be `error`.
- Use zero, one, or two return values only (e.g., `(T, error)` or `error`).
</Accordion>
<Accordion title="SQL Templates Causing Parsing Failures">
- Validate your comment SQL templates for typos or invalid Go template syntax.
- Use the example templates provided in the documentation for guidance.
</Accordion>
<Accordion title="Output Files Not in Expected Directory">
- Confirm your `-o` path is correctly set.
- Check if the package declares a `genconfig.Config.OutPath` which overrides the CLI flag.
</Accordion>
</AccordionGroup>

## 7. Next Steps

- Proceed to [Validate Your Setup](getting-started/first-steps/validate-your-setup) to ensure your generated code works as expected.
- Explore how to use the generated field helpers and query methods in [Using Generated Field Helpers](guides/getting-started-workflows/using-field-helpers).
- For complex SQL templates or associations, refer to the [Template-Based SQL Queries](guides/advanced-usage-patterns/template-queries) and [Managing Associations and Relationships](guides/advanced-usage-patterns/working-with-associations) guides.

---

## Additional Resources

- [Installing GORM CLI](getting-started/setup-installation/installing-gorm-cli): How to install the CLI binary.
- [Core Concepts & Terminology](overview/concepts-architecture-flow/core-concepts-terminology): Understand interface-driven APIs and field helpers.
- [Value Proposition & Key Benefits](overview/introduction-core-value/value-proposition-benefits): Why use GORM CLI.

---

> Generated code empowers you to write safer, more maintainable database queries aligned closely with your Go domain models, boosting productivity and minimizing runtime errors.

---