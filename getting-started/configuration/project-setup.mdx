---
title: "Project Setup & Model Definition"
description: "Walks users through initializing a Go project for GORM CLI, defining model structures, and creating interface-driven query definitions. Includes best practices for project layout and organization."
---

# Project Setup & Model Definition

This guide walks you through initializing a Go project tailored for using the GORM CLI. You will learn how to define your model structures, lay out your project for optimal code generation, and create interface-driven query definitions. Following these best practices ensures seamless integration with the GORM CLI's code generator and sets the foundation for type-safe, efficient database operations.

---

## 1. Initialize Your Go Project

Begin by setting up a standard Go module for your project. This provides a clean base to organize your GORM models and query interfaces.

```bash
mkdir myapp
cd myapp
// Initialize a new Go module
go mod init github.com/yourusername/myapp
```

Ensure your Go environment is version 1.18 or higher to fully support generics, which GORM CLI leverages extensively.

<Tip>
Always run `go mod tidy` after adding dependencies to keep your module clean and dependencies resolved.
</Tip>

---

## 2. Define Your Model Structures

Your data models serve as the backbone for GORM CLI's model-driven code generation. Define your structs in Go files within the same package or directory as your query interfaces to enable straightforward generation.

### Best Practices for Models

- **Use exported fields**: Only exported (capitalized) fields are considered.
- **Embed `gorm.Model` for common columns**: This adds ID, CreatedAt, UpdatedAt, and DeletedAt fields.
- **Add `gen` tags when needed**: Tags such as `gen:"json"` customize field helper generation.

### Example Model Definition

```go
// examples/models/user.go
package models

import (
  "gorm.io/gorm"
  "time"
)

type User struct {
  gorm.Model
  Name  string
  Email string
  Age   int
  Status string
  CreatedAt time.Time
  Profile string `gen:"json"` // Custom JSON helper mapping
}
```

<Tip>
Placing your models in a dedicated package (e.g., `models`) promotes clarity and reuse.
</Tip>

---

## 3. Create Interface-Driven Query Definitions

Write Go interfaces containing method definitions annotated with SQL templates in method comments. These templates guide the CLI generator to produce type-safe, fluent query APIs.

### Key Guidelines

- Interface methods should have well-documented SQL annotations using GORM CLI's template DSL.
- Use generic type parameters (`T any`) to tie queries to your model types.
- Place interfaces in the same package or directory with your models to facilitate smooth code generation.

### Example Query Interface

```go
// examples/query.go
package examples

import (
  "time"
  "gorm.io/cli/gorm/examples/models"
)

type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)

  // SELECT * FROM @@table WHERE @@column=@value
  FilterWithColumn(column string, value string) (T, error)

  // Complex conditional query
  QueryWith(user models.User) (T, error)

  // UPDATE @@table
  // {{set}}
  //   {{if user.Name != ""}} name=@user.Name, {{end}}
  //   {{if user.Age > 0}} age=@user.Age, {{end}}
  // {{end}}
  // WHERE id=@id
  UpdateInfo(user models.User, id int) error

  // Filter with time range
  FilterWithTime(start, end time.Time) ([]T, error)
}
```

<Tip>
Annotate your methods carefully with SQL comments to ensure accurate code generation. Use the `@@table`, `@@column`, `@param` placeholders, and directives like `{{where}}` for conditional logic.
</Tip>

---

## 4. Organize Your Project Layout

A consistent project and package structure helps with managing generation and integration.

### Recommended Directory Structure

```
myapp/
├── examples/
│   ├── models/
│   │   └── user.go      # Model structs
│   └── query.go         # Query interfaces
├── generated/           # Generated code output (after generation)
└── main.go              # CLI invocation or application entry
```

### Notes on Layout

- Keep models and query interfaces in the same directory or package to avoid import cycles.
- Use a dedicated output directory for generated files (`-o ./generated`) to cleanly separate source and generated code.
- Version your models and interfaces with proper Go module semantics.

---

## 5. Define `genconfig.Config` for Customization (Optional)

You can fine-tune code generation by declaring a `genconfig.Config` variable in your package.

### Example Configuration

```go
package examples

import (
  "database/sql"
  "gorm.io/cli/gorm/field"
  "gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
  OutPath: "examples/output",
  FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{},
  },
  FieldNameMap: map[string]any{
    "json": JSON{},   // Custom JSON mapping
  },
  IncludeStructs: []any{},
}
```

<Tip>
This configuration allows selective generation, field helper overrides, and custom field mappings. Place it with your interfaces and models.
</Tip>

---

## 6. Example: Putting It All Together

Assume these files in your `examples` directory:

- `models/user.go` defining the `User` struct
- `query.go` with the `Query[T any]` interface
- Optional `config.go` with `genconfig.Config`

When you run the generator (see other docs for running setup), it will create generated API code in the configured output directory, ready for use.

---

## 7. Next Steps

- Proceed to the **"Configuring the Generator"** guide to control generation details.
- Follow **"Running the First Code Generation"** to generate your APIs.
- Explore **"Validating Your Generated APIs"** to confirm correctness.

<Tip>
Keeping your models, query interfaces, and configurations well organized ensures clear maintainability and maximizes GORM CLI benefits.
</Tip>

---

## Troubleshooting & Tips

<AccordionGroup title="Common Issues During Project Setup">
<Accordion title="Interface and Model File Placement">
Ensure your query interfaces and model structs reside in the same package or directory. Separation may cause generation failures or obscure import errors.
</Accordion>
<Accordion title="Unsupported Field Types in Models">
If you encounter unsupported or unrecognized field types, consider adding custom field mappings in your `genconfig.Config` to guide the generator.
</Accordion>
<Accordion title="Go Module and Dependency Problems">
Verify your Go module and dependencies are correctly initialized with `go mod tidy`. The generator relies on proper package resolution.
</Accordion>
</AccordionGroup>

---

## References & Links

- [Quickstart Workflow](https://yourdocs.example.com/overview/integration-getting-started/quickstart-workflow) — Learn how to generate and use APIs.
- [Installing GORM CLI](https://yourdocs.example.com/getting-started/setup/installing-gorm-cli) — Setup prerequisites and install.
- [Configuring the Generator](https://yourdocs.example.com/getting-started/configuration/generator-configuration) — Customize generation behavior.
- [Working with Models and Query Interfaces](https://yourdocs.example.com/concepts/data-model-and-extension/model-structs-and-interfaces) — Deep dive on core concepts.


---

For more detail on writing queries with templates and field helpers, refer to the guides and reference sections linked above.


<Source url="https://github.com/go-gorm/cli" paths={[{"path": "examples/models/user.go", "range": "1-20"},{"path": "examples/query.go", "range": "1-90"}]} />
