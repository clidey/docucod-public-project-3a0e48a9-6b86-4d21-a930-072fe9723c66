---
title: "Running the Code Generator"
description: "Detailed instructions for using the CLI to generate type-safe query APIs and field helpers. Includes recommended command-line parameters and guidance on output structure."
---

# Running the Code Generator

This guide walks you through executing the GORM CLI code generator (`gorm gen`), transforming your Go interfaces with embedded SQL templates and models into type-safe query APIs and field helpers. It explains command-line usage, parameter options, expected output structure, and best practices for effective code generation.

---

## 1. Prerequisites

Before running the code generator, ensure you have:

- **GORM CLI installed** (see [Installing the GORM CLI](../setup-installation/installation-cli))
- **Go version 1.18 or higher** (required for generics support)
- Write **Go interface files** with SQL-based method comments
- Defined your **model structs** alongside or within the scanned directories

Verify your setup with the quick CLI validation guide if needed.

---

## 2. Running the Generator

The `gorm gen` command generates query APIs from your interface definitions.

### Basic Command Syntax

```bash
gorm gen -i <input-path> [-o <output-path>]
```

- `-i, --input`: (**Required**) Path to a Go source file or directory containing interfaces annotated with SQL templates.
- `-o, --output`: Output directory to place the generated code. Defaults to `./g`.

### Example

```bash
gorm gen -i ./examples -o ./generated
```

This example scans all Go files under `./examples` for SQL-annotated interfaces and outputs generated code into `./generated`, preserving the relative directory structure.

### Important Notes

- You must specify at least the input path.
- The generator recursively scans directories.
- The output path defaults to `./g` if not provided.
- Package-level `genconfig.Config` definitions in scanned files can override the output directory per package.

---

## 3. What Happens During Generation?

Upon running the generator, it will:

1. **Parse** all Go files under the input directory, extracting interface definitions and comments containing SQL templates.
2. **Apply configurations** from any GenConfig literals it finds, including field type mappings and inclusion/exclusion filters.
3. **Process interfaces and structs** to generate:
   - Strongly typed, SQL-backed query methods derived from your interface methods
   - Model-based field helpers for predicates, updates, and associations
4. **Write formatted Go source files** under the output directory, maintaining relative package structure.

The CLI prints progress logs to the console showing generated files and any errors.

---

## 4. Command-Line Flags and Options

| Flag          | Description                                       | Default   |
| ------------- | ------------------------------------------------ | --------- |
| `-i, --input` | Path to Go interface source files or package dir | *Required*|
| `-o, --output`| Directory to place generated code files           | `./g`     |

### Additional Recommendations

- Use absolute paths when possible to avoid ambiguity.
- Organize your model structs and interfaces cleanly for predictable generation.
- Add `genconfig.Config` in your source package to customize output paths and field mappings.

---

## 5. Understanding the Output

- **Generated Code Location**

  Generated files mirror the relative structure of your input directory inside the output directory.

- **File Contents**

  - Query interfaces implemented with methods that execute your templated SQL.
  - Model field helpers allowing type-safe, fluent predicate and update construction.

Example:

```
generated/
  models/
    user.go        # Generated field helpers for User struct
  query.go          # Generated query interface implementations
```

---

## 6. Recommended Workflow

1. Write your Go model structs with standard or custom `gen` tags.
2. Define Go interfaces specifying SQL query templates in comments.
3. Optionally configure generation with `genconfig.Config` literals.
4. Run `gorm gen -i ./path/to/your/package -o ./generated`.
5. Import and use generated APIs from the output directory.

---

## 7. Best Practices and Tips

- Keep interfaces focused and methods simple for clearer generation.
- Use the provided SQL templating DSL to safely bind parameters and conditionally build queries.
- Leverage `genconfig.Config` for controlling output, inclusion/exclusion, and type mappings.
- Regularly regenerate after modifying your input interfaces or models.
- Use version control on generated code or generate into a dedicated directory.

<Tip>
Consider automating generation as part of your build or CI pipeline to keep your generated APIs up-to-date.
</Tip>

---

## 8. Troubleshooting Common Issues

<AccordionGroup title="Common Generation Issues">
<Accordion title="Input Path Not Found or Empty">
Double-check the `-i` path to ensure it points to existing Go source files or directories containing your interfaces.
</Accordion>
<Accordion title="No Interfaces or Structs Processed">
- Confirm your interfaces contain SQL template comments.
- Check `genconfig.Config` inclusion/exclusion filters that may prevent generation.
</Accordion>
<Accordion title="Syntax Errors in Generated Code">
- Ensure all input files compile and have valid Go syntax and comments.
- Check for malformed SQL templates or unsupported directives.
</Accordion>
<Accordion title="Output Directory Not Written">
- Verify you have write permissions for the output path.
- Confirm the directory exists or allow the generator to create it.
</Accordion>
</AccordionGroup>

---

## 9. Next Steps

- Explore [Preparing Models & Query Interfaces](../first-codegen-workflow/prepare-models-interfaces) to structure your source code for generation.
- Learn about [Using the Generated APIs](../first-codegen-workflow/using-generated-code) to integrate generated code into your app.
- Review [Basic Configuration Options](../first-codegen-workflow/basic-configuration-options) to customize generation behavior.
- Visit [Validation & Troubleshooting](../first-codegen-workflow/validation-troubleshooting) for deeper problem-solving.

---

## 10. Additional Resources

- Quick CLI Validation: [cli-quick-validation](../setup-installation/cli-quick-validation)
- Installation Guide: [installation-cli](../setup-installation/installation-cli)
- SQL Template DSL: [templating-dsl](../../guides/advanced-patterns/templating-dsl)
- Custom Field Helpers: [custom-fields](../../guides/advanced-patterns/custom-fields)


---

This workflow empowers you to efficiently generate robust, type-safe database query code with clear control and flexibility, enabling confident development with GORM and Go.


---