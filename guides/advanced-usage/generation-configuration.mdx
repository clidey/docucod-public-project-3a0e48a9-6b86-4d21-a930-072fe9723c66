---
title: "Customizing Code Generation with genconfig"
description: "Set up and fine-tune code generation using genconfig.Config. Learn about advanced options like output paths, field type mapping, whitelist/blacklist, and file-level versus package-level configuration—with annotated configuration examples."
---

# Customizing Code Generation with genconfig

Unlock full control over your GORM CLI generated code by configuring `genconfig.Config`. This guide helps you set up and fine-tune code generation aspects such as output directory paths, field type mappings, inclusion/exclusion filters, and file-level versus package-level behavior. With annotated examples and practical tips, you will learn how to adapt generation to your project’s unique needs.

---

## What You Will Achieve

By the end of this guide, you will know how to:

- Declare a `genconfig.Config` instance in your package to customize generation behavior
- Override the output path where generated files are placed
- Map Go native or custom types to specialized field helpers
- Use whitelist and blacklist filters for interfaces and structs to include or exclude from generation
- Choose between file-level or package-level configuration application
- Apply configuration patterns flexibly across your codebase

---

## Prerequisites

- Basic understanding of GORM CLI usage and code generation workflow
- Familiarity with your Go codebase, including the interfaces and struct models you want to generate code for
- Access to declare package-level variables in your Go packages

---

## Overview: What Is `genconfig.Config`?

`genconfig.Config` is a Go struct that configures the behavior of GORM CLI code generation on a per-package or per-file basis. Placing a `genconfig.Config` variable in a package signals the generator to use these parameters when producing output for that package or associated source files.

### Core Fields Explained:

| Field               | Purpose |
|---------------------|---------|
| `OutPath`           | Override the default CLI output directory for generated code in this package or file.
| `FieldTypeMap`      | Map specific Go types (e.g., `sql.NullTime{}`) to field helper types (e.g., `field.Time{}`), for consistent handling.
| `FieldNameMap`      | Assign a field helper type based on a field's `gen:"name"` tag.
| `FileLevel`         | When `true`, the configuration applies only to the file where defined; otherwise, it applies to the entire package.
| `IncludeInterfaces` | Whitelist patterns or types of interfaces to generate; only matching interfaces are included.
| `ExcludeInterfaces` | Blacklist patterns or types of interfaces to skip from generation.
| `IncludeStructs`    | Whitelist patterns or types of structs to generate.
| `ExcludeStructs`    | Blacklist patterns or types of structs to exclude.

The generator prioritizes `Include*` filters over `Exclude*` filters.

---

## Step-by-Step: Setting Up `genconfig.Config`

<Steps>
<Step title="Declare the Config in Your Package">
Create a Go file in your package (e.g., `config.go`) and declare a variable of type `genconfig.Config` with your desired settings.

```go
package yourpackage

import (
  "database/sql"
  "gorm.io/cli/gorm/field"
  "gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
  OutPath: "generated/output/path",
  FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{},
  },
  FieldNameMap: map[string]any{
    "date": field.Time{},
    "json": JSON{},
  },
  FileLevel: false, // Applies to whole package
  IncludeInterfaces: []any{"Query*"},
  ExcludeInterfaces: []any{"*Deprecated*"},
  IncludeStructs: []any{"User", "Account*"},
  ExcludeStructs: []any{"*DTO"},
}
```

This example overrides output path, maps types, and applies filters.

</Step>
<Step title="Choose Output Directory">
Set the `OutPath` field to change where generated files for this package are placed. Default is often overridden by the CLI flag.

Example:

```go
OutPath: "examples/output",
```

Ensure the folder exists or the generation process will create it.

</Step>
<Step title="Field Helper Type Mapping">
Use `FieldTypeMap` to provide type mappings from Go native or custom types to specialized field helpers.

Example:

```go
FieldTypeMap: map[any]any{
  sql.NullTime{}: field.Time{},
},
```

Use `FieldNameMap` to map field helpers via `gen:"name"` tags on struct fields.

Example:

```go
FieldNameMap: map[string]any{
  "json": JSON{}, // custom JSON field helper
},
```

This enables custom logic or SQL generation for specific fields.

</Step>
<Step title="Control Scope: File Level or Package Level">
Set `FileLevel` to `true` if you want the config to apply only to the exact file where it’s declared. Otherwise, it applies package-wide.

This allows granular control when mixing configurations in the same package:

```go
FileLevel: true, // Apply config only for this file
```

</Step>
<Step title="Whitelist vs Blacklist Filters">
Use filter slices to include or exclude specific interfaces or structs by name or type pattern:

- `IncludeInterfaces` and `IncludeStructs` define whitelists. If non-empty, only listed items generate code.
- `ExcludeInterfaces` and `ExcludeStructs` define blacklists. They exclude matching items after processing include filters.

Patterns support shell-style wildcards:

```go
IncludeInterfaces: []any{"Query*", models.Query(nil)},
ExcludeStructs: []any{"*DTO"},
```

> The generator respects whitelist priority — if includes are present, excludes are ignored for that category.

</Step>
</Steps>

---

## Practical Examples

### Example 1: Package-Level Config with Output Override and Type Mapping

```go
package examples

import (
  "database/sql"
  "gorm.io/cli/gorm/field"
  "gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
  OutPath: "examples/output",
  FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{},
  },
  FieldNameMap: map[string]any{
    "date": field.Time{},
    "json": JSON{},
  },
  FileLevel: false,
  IncludeStructs: []any{}, // generate all structs
}
```

### Example 2: File-Level Config Excluding Specific Interfaces and Structs

```go
package nested

import "gorm.io/cli/gorm/genconfig"

var _ = genconfig.Config{
  FileLevel:         true,
  ExcludeInterfaces: []any{"I3"},
  ExcludeStructs:    []any{"S3"},
}
```

### Example 3: Filtering Interfaces by Name Pattern

```go
package pattern

import "gorm.io/cli/gorm/genconfig"

// Generate only interfaces whose names start with "Query"
var _ = genconfig.Config{
  IncludeInterfaces: []any{"Query*"},
}
```

---

## Best Practices & Tips

- **Place Config Early:** Declare your `genconfig.Config` variable near your package root or main model/interface files for clarity.
- **Prefer Whitelisting:** Use `Include*` filters for explicit and safe generation.
- **Leverage Type Mapping:** Map nullable or custom types to existing field helpers for consistent generated code.
- **Use FileLevel for Granularity:** When mixing multiple configs or selectively applying exclusions, `FileLevel: true` isolates scope.
- **Keep Configuration Simple:** Avoid overly complex filters or type literals if you can use shell-style patterns.
- **Check Output Path:** If you see files not generating or in unexpected directories, verify `OutPath` and CLI flags.

---

## Troubleshooting

<AccordionGroup title="Common Issues with genconfig.Config">
<Accordion title="Config Not Being Picked Up">
- Ensure the `genconfig.Config` variable is declared at package scope.
- Check for import conflicts or missing `genconfig` package import.
- Verify the file is included in the code generation input path.
</Accordion>
<Accordion title="Output Files in Unexpected Locations">
- Confirm your `OutPath` is correctly set relative to your project.
- Remember that `FileLevel` affects whether config applies to package or only the file.
</Accordion>
<Accordion title="Field Type Mapping Not Applied">
- The key in `FieldTypeMap` must be an instance of the Go type (e.g., `sql.NullTime{}`), not a string.
- The mapped value must be a field helper instance.
</Accordion>
<Accordion title="Include/Exclude Filters Not Matching as Expected">
- Use exact package-qualified names or shell-style patterns.
- Patterns support wildcards, e.g., `"Query*"`, `"*DTO"`.
- Confirm config literals like `models.User{}` use the right package path or pattern.
</Accordion>
</AccordionGroup>

---

## How Configuration Fits Into Your Generation Workflow

```mermaid
flowchart TD

  Start([Start Code Generation]) --> ScanSource[Parse User Source Files]
  ScanSource --> DetectConfig{genconfig.Config Present?}
  DetectConfig -- Yes --> LoadConfig[Load Config Parameters]
  DetectConfig -- No --> UseDefaults[Use Default Generation Settings]

  LoadConfig --> ApplyFilters[Apply Include/Exclude Filters on Interfaces & Structs]
  ApplyFilters --> MapFieldTypes[Apply FieldTypeMap and FieldNameMap]
  MapFieldTypes --> DetermineOutPath[Determine Output Directory (consider OutPath)]
  DetermineOutPath --> GenerateCode[Generate Typed Code and Field Helpers]
  UseDefaults --> GenerateCode
  GenerateCode --> End([Finish & Output Files])

  classDef decision fill:#f9f,stroke:#333,stroke-width:2px;
  class DetectConfig decision;
```

- The generator locates `genconfig.Config` in source packages
- Config controls which interfaces and structs are generated
- Mapping fields affects the generated field helpers
- Output path overrides direct where artifacts are written

---

## Next Steps

- Explore [Writing Interfaces & Models](https://yourdomain.com/getting-started/first-run-generation/configuration-basics) to learn how to write inputs for code generation.
- See [Generating Code](https://yourdomain.com/getting-started/first-run-generation/generating-code) for CLI usage.
- Dive into [Using Generated APIs](https://yourdomain.com/getting-started/first-run-generation/first-usage) to apply generated code.
- Consult [Building and Integrating Custom Field Helpers](https://yourdomain.com/guides/advanced-usage/custom-field-helpers) to create custom field mappings.

---

## Additional Resources

- See the [GORM CLI README](https://github.com/go-gorm/cli/blob/main/README.md) for comprehensive examples
- Review example configs in the `examples/filters/` directory of the source repo
- Troubleshooting tips: [Troubleshooting Common Issues](https://yourdomain.com/getting-started/configuration-validation/troubleshooting)

---

Thank you for customizing GORM CLI generation! With targeted configuration, your generated code visually and functionally aligns perfectly with your project needs.

---