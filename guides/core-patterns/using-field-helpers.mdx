---
title: "Updates, Filters, and Field Helpers"
description: "Details the usage of model-driven field helpers for filtering, updates, and value setting in queries and mutations. Explains predicate functions, update patterns, and the rationale behind helper design for core CRUD operations."
---

# Updates, Filters, and Field Helpers

This guide details how to use the **model-driven field helpers** generated by GORM CLI to build precise filtering queries, construct dynamic updates, and set values in both queries and mutations. It highlights the predicate functions, update patterns, and the rationale behind the design of these helpers for core CRUD operations.

---

## 1. Overview

### Purpose
This guide helps you understand and effectively use field helpers generated from your Go model structs. These helpers enable expressive, type-safe, and fluent APIs for filtering data, updating records, and creating new entries in GORM-based applications.

### Prerequisites
- You have run `gorm gen` and generated your model helpers from your structs.
- Familiarity with GORM basics and Go generics.
- A working database connection through GORM.

### Expected Outcome
After following this guide, you will be proficient in:
- Writing queries with strongly typed, fluent field predicates.
- Executing updates with zero-value support and incremental expressions.
- Creating records using field helper setters.
- Performing association updates and manipulations safely.

### Time Estimate
5-10 minutes to read and try examples.

### Difficulty Level
Intermediate: some familiarity with Go, GORM, and database operations recommended.

---

## 2. Using Field Helpers for Filtering Queries

Each model field generates helper objects exposing methods to construct **predicate expressions**. These predicates can then be passed to query builders like `Where()`.

### Predicate Examples
For a model `User`, with a field `Age int`, helpers like `generated.User.Age.Eq(18)` produce SQL predicates like `age = 18` safely typed.

```go
// Find users where age is greater than 18 and role is "active"
var activeAdults []models.User
if err := gorm.G[models.User](db).
	Where(generated.User.Age.Gt(18), generated.User.Role.Eq("active")).
	Scan(ctx, &activeAdults); err != nil {
	panic(err)
}
```

### Common Predicate Methods
- `.Eq(value)` = Column equals value
- `.Neq(value)` = Column not equals
- `.Gt(value)` / `.Gte(value)` = Greater than / greater or equal
- `.Lt(value)` / `.Lte(value)` = Less than / less or equal
- `.IsNull()` / `.IsNotNull()` = IS NULL / IS NOT NULL
- `.Like(pattern)` = LIKE comparison
- `.Between(start, end)` = BETWEEN range

### Tips
- Combine multiple predicates as variadic arguments in `Where()` to AND conditions.
- Use predicates targeting nullable types safely with `IsNull()` / `IsNotNull()`.

---

## 3. Updating Records with Helpers

Field helpers support update operations in several flexible patterns:

### 3.1 Basic Update with Conditions
Use `.Where()` with predicates and `.Update()` to update matching rows.

```go
// Set role = "active" for users in "pending" state
_, err := gorm.G[models.User](db).
	Where(generated.User.Role.Eq("pending")).
	Update(ctx, "role", "active")
```

### 3.2 Update Using Set Assignments
More advanced and type-safe is to use `.Set(...)` with field helper setters, then call `.Update(ctx)`. This allows multiple field assignments, including zero values and custom expressions.

```go
// Flip role to "active" for all users currently "pending"
rows, err := gorm.G[models.User](db).
	Where(generated.User.Role.Eq("pending")).
	Set(
		generated.User.Role.Set("active"),
		generated.User.Age.Incr(1),            // Increment age by 1
		generated.User.IsAdult.Set(false),    // Set boolean zero-value explicitly
	).
	Update(ctx)
```

### 3.3 Creating Records with Set Assignments
Use `.Set(...)` followed by `.Create(ctx)` to build new records in a fluent way.

```go
// Create a new user record with fields set via helpers
err := gorm.G[models.User](db).
	Set(
		generated.User.Name.Set("new_user"),
		generated.User.Age.Set(29),
		generated.User.Role.Set("active"),
		generated.User.IsAdult.Set(true),
	).
	Create(ctx)
```

### 3.4 Using Expressions in Updates
Helpers support raw SQL expressions to represent dynamic updates.

```go
// Increment Bob's age by 1
rows, err := gorm.G[models.User](db).
	Where(generated.User.Name.Eq("bob")).
	Set(
		generated.User.Age.SetExpr(clause.Expr{SQL: "age + ?", Vars: []any{1}}),
	).
	Update(ctx)
```

### 3.5 Zero-Value Updates
Explicitly set zero values safelyâ€”strings to empty, booleans false, nullable types as null.

```go
// Reset Alice's attributes to zero values
_, err := gorm.G[models.User](db).
	Where(generated.User.Name.Eq("alice")).
	Set(
		generated.User.Age.Set(0),
		generated.User.IsAdult.Set(false),
		generated.User.Role.Set(""),
		generated.User.Score.Set(sql.NullInt64{}), // nullable field
	).
	Update(ctx)
```

### 3.6 Increment/Decrement Helpers
For numeric fields, use `.Incr(value)` or `.Decr(value)` to modify counters elegantly.

```go
// Increase Bob's age by 3
rows, err := gorm.G[models.User](db).
	Where(generated.User.Name.Eq("bob")).
	Set(
		generated.User.Age.Incr(3),
	).
	Update(ctx)
```

### 3.7 Custom Setter Expression Helpers
You can chain predefined expression helpers like `.Upper()` for string transformations.

```go
// Change Alice's name to uppercase
_, err := gorm.G[models.User](db).
	Where(generated.User.Name.Eq("alice")).
	Set(
		generated.User.Name.Upper(),
	).
	Update(ctx)
```

---

## 4. Working with Null and Specialized Field Types

Field helpers recognize nullable types (`sql.NullInt64`, `sql.NullTime`) and support explicit checks using `.IsNull()` and `.IsNotNull()` predicates.

You can safely query and update null values, and the code generation respects and wraps these types.

---

## 5. Association Field Helpers

Association fields (has one, has many, belongs to, many2many) generate special helpers `field.Struct[T]` and `field.Slice[T]` that provide operations for managing related entities.

### Supported Association Operations
- **Create:** Create and associate related records
- **CreateInBatch:** Batch create/link using slices
- **Update:** Update associated rows optionally filtered by conditions
- **Delete:** Remove associated records
- **Unlink:** Remove association links without deleting data

### Usage Examples
```go
// Create user with one pet
gorm.G[User](db).
	Set(
		generated.User.Name.Set("alice"),
		generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
	).
	Create(ctx)

// Add multiple languages to user via many2many
gorm.G[User](db).
	Set(
		generated.User.Name.Set("polyglot"),
		generated.User.Languages.CreateInBatch([]models.Language{{Code: "EN"}, {Code: "FR"}}),
	).
	Create(ctx)

// Update pet's name linked to user ID 1
gorm.G[User](db).
	Where(generated.User.ID.Eq(1)).
	Set(
		generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).Update(generated.Pet.Name.Set("rex")),
	).
	Update(ctx)

// Unlink pets from user ID 1 (removes FK link but keeps pet records)
gorm.G[User](db).
	Where(generated.User.ID.Eq(1)).
	Set(generated.User.Pets.Unlink()).
	Update(ctx)

// Delete pets linked to user ID 1
gorm.G[User](db).
	Where(generated.User.ID.Eq(1)).
	Set(generated.User.Pets.Delete()).
	Update(ctx)
```

### Semantics by Association Type
| Association Type | Unlink Semantics                        | Delete Semantics                  |
|------------------|---------------------------------------|----------------------------------|
| Belongs To       | Sets parent's FK field to NULL         | Deletes associated row           |
| Has One/Many     | Sets child's FK field to NULL          | Deletes child rows               |
| Many2Many        | Removes join table rows only            | Removes join table rows only     |

---

## 6. Practical Tips and Best Practices

- Use the generated field helpers to avoid string-based column names and reduce runtime errors.
- For bulk updates or complex conditions, combine `.Where()` predicates with `.Set()` assignments.
- Always verify operation success by querying affected rows or counts where applicable.
- When working with nullable fields, prefer `.IsNull()` / `.IsNotNull()` for clarity.
- Leverage association helpers to simplify managing related entities instead of manually crafting join logic.
- Use `.CreateInBatch()` to efficiently batch insert association records.

---

## 7. Common Pitfalls and Troubleshooting

<AccordionGroup title="Common Issues with Field Helpers">
<Accordion title="Update fails with zero affected rows">
Make sure your `.Where()` predicate correctly targets existing records. Validate predicate construction using simple queries first.
</Accordion>
<Accordion title="Zero value updates are ignored">
You must use `.Set()` with explicit setter helpers to send zero values; direct map-style updates may omit zero values.
</Accordion>
<Accordion title="Association update not applied">
Confirm association conditions in `.Where()` when chaining `.Update()` on associated fields. Also verify foreign keys and relationships in your models.
</Accordion>
<Accordion title="Nil pointer or type errors when using helpers">
Ensure your generated code is up to date with your model definitions and go modules refreshed. Regenerate helpers after every model change.
</Accordion>
</AccordionGroup>

---

## 8. Summary

You have learned how to use GORM CLI-generated field helpers to write expressive, type-safe filters and updates:
- Query filtering using predicate functions like `.Eq()`, `.Gt()`, `.IsNull()` etc.
- Update and creation workflows with `.Set()` assignments supporting zero values, expressions, and increments.
- Association operations including create, batch create, update, unlink, and delete with filters.

Mastering these helpers streamlines your GORM interactions, reduces bugs, and keeps code concise.

---

## 9. References and Next Steps

- **[Quickstart: Generate Type-Safe APIs](/guides/getting-started/quickstart-workflow)** â€” start using generated APIs.
- **[Building Queries with Generated APIs](/guides/core-patterns/building-queries)** â€” deepen your query construction skills.
- **[Working with Associations](/guides/core-patterns/association-operations)** â€” detailed guide on association helpers.
- **[Defining and Using Custom Field Helpers](/guides/advanced/custom-fields)** â€” extend field helpers with custom logic.
- **Official GORM CLI Repository**: [https://github.com/go-gorm/cli](https://github.com/go-gorm/cli)

Use these resources to extend your mastery and integrate GORM CLI smoothly into your project workflows.

---