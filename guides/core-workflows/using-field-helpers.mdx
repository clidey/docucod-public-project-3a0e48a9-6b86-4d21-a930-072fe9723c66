---
title: "Working with Model-Driven Field Helpers"
description: "Deep dive into using generated field helpers for filtering, updating, and composing queries. Explore patterns for leveraging the strongly typed API to perform common read and write operations, reduce runtime errors, and write expressive, maintainable code."
---

# Working with Model-Driven Field Helpers

## Overview

This guide provides a detailed exploration of how to leverage the model-driven field helpers generated by GORM CLI for filtering, updating, and composing queries. These helpers provide a strongly typed, safe, and expressive API that lets you manipulate your database records with confidence, reducing runtime errors and enhancing maintainability.

You will learn how to use these helpers for common read and write operations, including working with basic fields and associations, applying predicates and setters, and composing complex queries.

---

## 1. Understanding Model-Driven Field Helpers

### What They Are

Model-driven field helpers are Go structures automatically generated from your model structs. Each field in your struct (including basic types and associations) gets a corresponding typed field helper instance.

These helpers provide:
- **Predicates for filtering**: e.g., `Eq`, `Like`, `Between`, `IsNull`.
- **Setters for updates and creations**: e.g., `Set`, `SetExpr`, `Incr`.
- **Association operation helpers**: for creating, updating, unlinking, and deleting related entities.


### Why They Matter

- **Type Safety**: The helpers are strongly typed, aligned with your Go model types, eliminating mismatch errors.
- **Expressive Queries**: Easily produce complex SQL conditions using chained helper methods.
- **Maintainability**: Changes in your model reflect automatically in generated helpers.

<Tip>
Model-driven helpers are your primary abstraction for query construction with GORM CLI-generated code. Mastering their use is essential for fluent, robust database interactions.
</Tip>

---

## 2. Using Field Helpers for Basic Fields

These cover scalar fields such as int, string, bool, time.Time, []byte, and types implementing the Scanner/Valuer interfaces.

### Example: Working with a User Model

```go
import "gorm.io/cli/gorm/generated"

// Filtering users older than 18
users, err := gorm.G[models.User](db).
  Where(generated.User.Age.Gt(18)).
  Find(ctx)

// Setting multiple fields during create
err = gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.IsAdult.Set(true),
    generated.User.Score.Set(sql.NullInt64{Valid: true, Int64: 100}),
  ).
  Create(ctx)
```

### Common Predicates

- `.Eq(value)` — equals
- `.Neq(value)` — not equals
- `.Gt(value)` — greater than
- `.Lt(value)` — less than
- `.Between(low, high)` — between two values
- `.Like(pattern)` — SQL LIKE
- `.IsNull()` / `.IsNotNull()` — NULL checks

### Common Setters

- `.Set(value)` — set exact value
- `.SetExpr(clause.Expr)` — set via SQL expression
- `.Incr(delta)` / `.Decr(delta)` — increment/decrement numeric field

<Note>
Predicates and setters reflect the underlying Go type for the field, enabling compile-time safety and autocomplete in IDEs.
</Note>

---

## 3. Working with Associations

Association helpers are generated for related struct fields and slices. They expose operations to create, update, unlink (dissociate), or delete associated rows.

### Association Helper Types

- `field.Struct[T]` for singular associations (has one, belongs to)
- `field.Slice[T]` for multiple associations (has many, many2many)

### Supported Operations

- `.Create(setters...)` — create new associated record(s) and link
- `.CreateInBatch(sliceOfModels)` — batch create and link
- `.Update(setters...)` — update associated rows matching optional filters
- `.Unlink()` — remove association link while keeping rows
- `.Delete()` — delete associated rows
- `.Where(predicates...)` — filter associated rows for update/unlink/delete

### Examples

```go
// Create a user with one pet
err := gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).
  Create(ctx)

// Link languages to a user (many2many)
err := gorm.G[models.User](db).
  Set(
    generated.User.Languages.CreateInBatch([]models.Language{{Code: "EN"}, {Code: "FR"}}),
  ).
  Update(ctx)

// Update pet's name for a specific user
err := gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(
    generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).Update(generated.Pet.Name.Set("rex")),
  ).
  Update(ctx)

// Unlink pets from a user without deleting them
err := gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Unlink()).
  Update(ctx)

// Delete old pets of a user
err := gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("old")).Delete()).
  Update(ctx)
```

<Warning>
Unlinking clears foreign keys or removes join table rows without deleting the associated data. Use Delete for removing data permanently.
</Warning>

---

## 4. Composing Queries with Field Helpers

Field helpers integrate seamlessly with GORM's fluent API to build highly dynamic and maintainable queries.

### Filtering Lists Using Predicates

```go
users, err := gorm.G[models.User](db).
  Where(
    generated.User.Name.Like("%jinzhu%"),
    generated.User.Age.Between(18, 65),
    generated.User.Score.IsNull(),
  ).
  Find(ctx)
```

### Updates with Setters

```go
err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("alice")).
  Set(
    generated.User.Name.Set("jinzhu"),
    generated.User.IsAdult.Set(false),
    generated.User.Score.Set(sql.NullInt64{}),
    generated.User.Age.Incr(1),
    generated.User.Age.SetExpr(clause.Expr{SQL: "GREATEST(?, ?)", Vars: []any{clause.Column{Name: "age"}, 18}}),
  ).
  Update(ctx)
```

---

## 5. Best Practices and Tips

- **Use Generated Helpers for All Query Building**: Avoid manually crafting SQL column strings where possible; rely on field helpers for column naming and type safety.
- **Model Changes Reflect in Helpers**: When you add or modify model fields, regenerate helpers to stay in sync.
- **Use Association Filters to Scope Operations**: Always chain `.Where()` for association updates/unlinks/deletes to target precise sets.
- **Leverage Batch Operations for Efficiency**: Use `.CreateInBatch` to reduce multiple inserts and speed up association linking.

<Tip>
Customize field helper behavior with `genconfig.Config` to map specific types or struct tags to custom field helpers (e.g., JSON fields).
</Tip>

---

## 6. Troubleshooting Common Issues

<AccordionGroup title="Common Field Helper Issues">
<Accordion title="My field helper does not generate for a model field">
- Ensure your model field is exported.
- Check if you have `IncludeStructs` or `ExcludeStructs` filters in your config that might omit your struct.
- Verify that the Go type of the field is supported or correctly mapped via `FieldTypeMap` or `FieldNameMap`.
</Accordion>
<Accordion title="Association operations fail or do not update related records">
- Confirm that the association relationship is correctly expressed in your model (e.g., `gorm:"foreignkey:ManagerID"`).
- Make sure your association helper is used with proper `.Where()` filters if targeting specific related records.
- Check foreign key constraints in your database; unlink and delete semantics differ by association type.
</Accordion>
<Accordion title="Setters with zero values aren’t applying updates">
- Use explicit `.Set(value)` with zero values (e.g., `false`, `0`), as omitting them could skip generation.
- For complex expressions, use `.SetExpr()` with `clause.Expr`.
</Accordion>
</AccordionGroup>

---

## 7. Next Steps & Related Documentation

- **Generating Code**: Review [Generating Type-Safe APIs and Helpers](/getting-started/core-workflow-quickstart/generate-api) to understand code generation triggers.
- **Using Generated APIs**: Consult [Using Generated APIs: First Query](/getting-started/core-workflow-quickstart/using-generated-code) to see field helpers in real query flows.
- **Managing Associations Safely**: Explore [Guided: Managing Associations Safely](/guides/core-workflows/association-operations) for advanced association patterns.
- **Custom Field Helpers**: Learn about [Implementing Custom Field Helpers (e.g. JSON fields)](/guides/advanced-patterns/custom-field-helpers) for extending capabilities.
- **Configuration Options**: Understand how to use `genconfig.Config` affecting helper generation at [Basic Generation Configuration](/getting-started/configuration-troubleshooting/basic-configuration).

---

## Appendix: Sample Generated Field Helpers for User Model

```go
var User = struct {
  ID        field.Number[uint]
  CreatedAt field.Time
  UpdatedAt field.Time
  DeletedAt field.Field[gorm.DeletedAt]
  Name      field.String
  Age       field.Number[int]
  Birthday  field.Time
  Score     field.Field[sql.NullInt64]
  LastLogin field.Time
  Account   field.Struct[models.Account]
  Pets      field.Slice[models.Pet]
  Toys      field.Slice[models.Toy]
  CompanyID field.Number[int]
  Company   field.Struct[models.Company]
  ManagerID field.Number[uint]
  Manager   field.Struct[models.User]
  Team      field.Slice[models.User]
  Languages field.Slice[models.Language]
  Friends   field.Slice[models.User]
  Role      field.String
  IsAdult   field.Bool
  Profile   examples.JSON
}{
  ID:        field.Number[uint]{}.WithColumn("id"),
  CreatedAt: field.Time{}.WithColumn("created_at"),
  UpdatedAt: field.Time{}.WithColumn("updated_at"),
  DeletedAt: field.Field[gorm.DeletedAt]{}.WithColumn("deleted_at"),
  Name:      field.String{}.WithColumn("name"),
  Age:       field.Number[int]{}.WithColumn("age"),
  Birthday:  field.Time{}.WithColumn("birthday"),
  Score:     field.Field[sql.NullInt64]{}.WithColumn("score"),
  LastLogin: field.Time{}.WithColumn("last_login"),
  Account:   field.Struct[models.Account]{}.WithName("Account"),
  Pets:      field.Slice[models.Pet]{}.WithName("Pets"),
  Toys:      field.Slice[models.Toy]{}.WithName("Toys"),
  CompanyID: field.Number[int]{}.WithColumn("company_id"),
  Company:   field.Struct[models.Company]{}.WithName("Company"),
  ManagerID: field.Number[uint]{}.WithColumn("manager_id"),
  Manager:   field.Struct[models.User]{}.WithName("Manager"),
  Team:      field.Slice[models.User]{}.WithName("Team"),
  Languages: field.Slice[models.Language]{}.WithName("Languages"),
  Friends:   field.Slice[models.User]{}.WithName("Friends"),
  Role:      field.String{}.WithColumn("role"),
  IsAdult:   field.Bool{}.WithColumn("is_adult"),
  Profile:   examples.JSON{}.WithColumn("profile"),
}
```

Use these exactly as shown to build predicates and setters in your queries.

---