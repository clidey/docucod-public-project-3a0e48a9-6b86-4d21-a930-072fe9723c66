---
title: "Using Model-Driven Field Helpers"
description: "Guide to using the generated field helpers for filters, updates, ordering, and association access. Includes examples of common predicates, mutations, and composing expressive queries and updates using helpers, with code samples drawn from real model definitions."
---

# Using Model-Driven Field Helpers

Harness the full power of GORM CLI’s **generated model-driven field helpers** to compose expressive, type-safe queries, generate updates with zero-value handling and SQL expressions, sort data with order expressions, and operate on associations like create, update, unlink, and delete—all with compile-time safety and discoverability.

---

## 1. Overview

### What This Guide Helps You Accomplish
This guide focuses on using the **generated field helpers** derived from your Go model structs. You will learn how to:

- Compose **filter predicates** for building conditional queries
- Create **update assignments** for set operations with support for expressions and zero values
- Generate **order expressions** for sorting results
- Access and manipulate **associations** with create, update, unlink, and delete actions

### Prerequisites
- You have generated your model-driven helpers using GORM CLI.
- Familiarity with GORM basics: working with `*gorm.DB`, filtering, and updating.
- Basic understanding of your Go model structs and associated database schema.

### Expected Outcome
By following this guide, you will confidently write compact, readable, and type-safe database queries and updates leveraging the generated field helpers.

### Time Estimate
15–30 minutes to explore examples and incorporate helper usage into your code.

### Difficulty Level
Intermediate — familiarity with GORM and Go generics will help maximize value.

---

## 2. Understanding Field Helpers

Each generated model exposes a global variable with all its fields as typed helpers. For example, given a `User` model, the generated helper looks like:

```go
var User = struct {
    ID        field.Number[uint]
    Name      field.String
    Age       field.Number[int]
    Role      field.String
    IsAdult   field.Bool
    Profile   examples.JSON
    Pets      field.Slice[models.Pet]
    Account   field.Struct[models.Account]
    // ... other fields and associations
}{}
```

The helpers provide **predicate methods** for querying and **setters** for updates, along with association operation helpers.

---

## 3. Step-by-Step Usage Guide

### 3.1 Filtering with Field Helpers

Use predicates to construct WHERE conditions fluently, for single or combined filters.

#### Examples:

```go
// Filter users with age > 18 and role = "active"
db.Where(generated.User.Age.Gt(18), generated.User.Role.Eq("active")).Find(&users)

// Check for NULL or NOT NULL
db.Where(generated.User.Score.IsNull()).Find(&usersWithNoScore)
db.Where(generated.User.LastLogin.IsNotNull()).Find(&usersLoggedIn)

// Complex string patterns
db.Where(generated.User.Name.Like("%smith%")).Find(&smithUsers)

// Using custom JSON field helpers
db.Where(generated.User.Profile.Equal("$.vip", true)).Find(&vipUsers)
```

### 3.2 Updating Records with Field Helpers

Field helpers create **assignments** for `Set(...)` calls in updates or creates. They handle zero values explicitly, allowing you to set NULL or zero values safely.

#### Examples:

```go
// Update user role and zero out Score
db.Where(generated.User.Name.Eq("alice")).
  Set(
    generated.User.Role.Set("active"),
    generated.User.Score.Set(sql.NullInt64{}), // set to NULL
  ).
  Update(ctx)

// Increment Age by 1 using SQL expression
db.Where(generated.User.Name.Eq("bob")).
  Set(generated.User.Age.SetExpr(clause.Expr{SQL: "age + ?", Vars: []any{1}})).
  Update(ctx)

// Use helper for uppercase string update
db.Where(generated.User.Name.Eq("alice")).
  Set(generated.User.Name.Upper()).
  Update(ctx)

// Create new user with explicit zero/NULL values
db.Set(
  generated.User.Name.Set("new_user"),
  generated.User.Age.Set(0),
  generated.User.IsAdult.Set(false),
  generated.User.Score.Set(sql.NullInt64{}),
  generated.User.Role.Set("")
).Create(ctx)
```

### 3.3 Ordering Results

Sort query results easily using `.Asc()` and `.Desc()` order helpers.

```go
// Order users by CreatedAt most recent first
db.Order(generated.User.CreatedAt.Desc()).Find(&users)

// Custom order expressions
db.Order(generated.User.Name.OrderExpr("CASE WHEN ? IS NULL THEN 1 ELSE 0 END", generated.User.Name)).Find(&users)
```

### 3.4 Working with Associations

Access related entities using generated association helpers for **has one**, **has many**, **belongs to**, and **many2many** relationships.

Supported operations:

- `Create()` — create and associate one or more related records
- `CreateInBatch()` — batch create linked records
- `Update()` — update associated rows with optional filters
- `Unlink()` — remove association link without deleting rows
- `Delete()` — delete associated rows

#### Examples:

```go
// Create a new user and one pet in one operation
gorm.G[User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).Create(ctx)

// Batch add languages to user
gorm.G[User](db).
  Where(generated.User.ID.Eq(100)).
  Set(generated.User.Languages.CreateInBatch([]models.Language{{Code: "EN"}, {Code: "FR"}})).
  Update(ctx)

// Update a user's pet name with condition
gorm.G[User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).Update(generated.Pet.Name.Set("rex"))).
  Update(ctx)

// Unlink (clear association without deleting pets)
gorm.G[User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Unlink()).
  Update(ctx)

// Delete pets where name = 'old'
gorm.G[User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("old")).Delete()).
  Update(ctx)
```

---

## 4. Practical Tips & Best Practices

- **Always use typed helpers:** This ensures compile-time safety and better discoverability.
- **Zero values are explicit:** Setting `Set(value)` ensures fields get updated even if the value is a Go zero (e.g., `0`, `""`, `false`, or `sql.NullInt64{}` to NULL).
- **Composing multiple conditions:** Combine predicates with multiple `.Where()` expressions or chained `.Where(...)` calls.
- **Use association filtering cautiously:** When updating/deleting associations, use `.Where()` on the association helper to scope to precise related entities.
- **Batch create associations for efficiency:** Use `CreateInBatch()` for inserting multiple related records at once.
- **Leverage expression setters:** Use `SetExpr()` or the provided expression helpers (e.g., `.Incr()`, `.Upper()`) to update values via SQL functions or calculations.

---

## 5. Common Pitfalls & Troubleshooting

<AccordionGroup title="Troubleshooting Field Helpers">
<Accordion title="Predicate Not Filtering as Expected">
- Ensure you are using the correct field helper matching the model.
- Double-check column mappings if you customized via `genconfig`.
- Use `.Eq()`, `.Neq()`, `.Gt()`, etc., as appropriate; mixing raw SQL can bypass helper checks.
</Accordion>
<Accordion title="Updates Not Reflecting Zero Values">
- Always use the `Set()` helpers explicitly to update zero values.
- Avoid omitting zero fields or directly using GORM `Updates` without generated helpers.
</Accordion>
<Accordion title="Association Operations Not Affecting Expected Rows">
- Confirm `.Where()` on association helpers scopes associated records correctly.
- Remember that `Unlink()` does not delete rows but clears foreign keys or join table entries.
- For many-to-many, `Delete()` only removes join rows, not related entities.
</Accordion>
<Accordion title="Generated Code Not Found or Unavailable">
- Verify your generation process succeeded without errors.
- Check that your imports and package paths align with generated code.
- Confirm model and interface names are included in generation config.
</Accordion>
</AccordionGroup>

---

## 6. Final Example: Combining Queries and Updates

```go
ctx := context.Background()

// Find active users older than 18
var users []models.User
db := gorm.G[models.User](db)
err := db.Where(
  generated.User.Age.Gt(18),
  generated.User.Role.Eq("active"),
).Find(ctx, &users)
if err != nil {
  panic(err)
}

// Increment Age and set IsAdult true for all pending users
rows, err := db.Where(generated.User.Role.Eq("pending")).
  Set(
    generated.User.Age.Incr(1),
    generated.User.IsAdult.Set(true),
    generated.User.Role.Set("active"),
  ).Update(ctx)
if err != nil {
  panic(err)
}

fmt.Printf("Updated %d users from pending to active.\n", rows)

// Create a new user with two linked pets
err = db.Set(
  generated.User.Name.Set("polyglot"),
  generated.User.Languages.CreateInBatch([]models.Language{{Code: "EN"}, {Code: "FR"}}),
  generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  generated.User.Pets.Create(generated.Pet.Name.Set("whiskers")),
).Create(ctx)
if err != nil {
  panic(err)
}
```

---

## 7. Related Documentation & Next Steps

- [Getting Started: Using the Generated APIs](../getting-started/config-gen-first-run/using-generated) — How to start using generated helpers and interfaces
- [Working with Associations: Create, Update, Unlink, and Delete](../advanced-patterns/association-workflows) — Deep dive into associations
- [Writing Custom Queries with SQL Templates](../advanced-patterns/template-queries) — For complex queries combining field helpers
- [Customizing Code Generation with genconfig.Config](../customization-integration/generation-config) — Fine-tune your helper output

---

## Appendix: Generated Field Helper Methods Summary

| Method / Helper       | Purpose                                 | Notes / Examples                      |
|----------------------|-----------------------------------------|-------------------------------------|
| `Eq(value)`          | Field equals value                      | `.Where(User.Name.Eq("alice"))`   |
| `Neq(value)`         | Field not equals value                  | `.Where(User.Role.Neq("pending"))`|
| `Gt(value)`          | Greater than                           | `.Where(User.Age.Gt(18))`            |
| `Gte(value)`         | Greater than or equal                  | `.Where(User.Age.Gte(21))`           |
| `Lt(value)`          | Less than                             | `.Where(User.Age.Lt(65))`            |
| `Lte(value)`         | Less than or equal                    | `.Where(User.Age.Lte(65))`           |
| `Like(pattern)`      | LIKE pattern matching                 | `.Where(User.Name.Like("%smith%"))`|
| `IsNull()`           | Check for NULL                       | `.Where(User.Score.IsNull())`        |
| `IsNotNull()`        | Check for NOT NULL                   | `.Where(User.LastLogin.IsNotNull())`|
| `Set(value)`         | Assign value for updates              | `.Set(User.Age.Set(30))`             |
| `SetExpr(expr)`      | Assign expression/update SQL          | `.Set(User.Age.SetExpr(clause.Expr{SQL:"age + ?", Vars: []any{1}}))`|
| `Incr(delta)`         | Increment numeric value (provided helper) | `.Set(User.Age.Incr(1))`         |
| `Asc()` / `Desc()`   | Ordering for query sorting            | `.Order(User.CreatedAt.Desc())`      |
| Associations `.Create()`, `.Update()`, `.Unlink()`, `.Delete()`, `.CreateInBatch()` | Manipulate associated records | See section 3.4 |


---

Harness generated field helpers to eliminate boilerplate, improve correctness, and write concise, expressive GORM queries and updates with confidence.