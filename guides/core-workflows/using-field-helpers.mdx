---
title: "Using Field Helpers for Filters & Updates"
description: "Learn how to use model-driven field helpers for composing powerful filters, conditional updates, and sophisticated criteria. Explore generated predicates, setters, and how they fit into GORM’s chainable API."
---

# Using Field Helpers for Filters & Updates

## Overview

This guide teaches you how to leverage **model-driven field helpers** generated by GORM CLI to build robust, type-safe filters and perform conditional updates in your Go projects using GORM.

Field helpers are generated alongside your models and provide **fluent predicates**, **setters**, and other helper methods that seamlessly integrate with GORM’s chainable API. They empower you to compose powerful queries and updates with compile-time safety and clear syntax.

By mastering the use of field helpers, you'll unlock maintainable, expressive database code that reduces errors and accelerates development.

---

## Prerequisites

Before you begin:

- You have installed GORM CLI and successfully generated code for your models (see [Generating Your First Code](https://docs.gorm.io/cli/getting-started/first-steps/generating-code)).
- Your Go project imports and uses the generated package that includes field helpers.
- Basic familiarity with GORM’s `*gorm.DB` usage and Go generics.

---

## What You Will Achieve

By following this guide, you will be able to:

- Use generated predicates for filtering queries with strong typing.
- Use generated setters to perform safe and expressive updates.
- Combine predicates and setters in GORM fluent chains for clean and efficient database operations.
- Handle zero-values and SQL expressions safely in updates.
- Understand how field helpers support model associations and complex conditions.

---

## Time Estimate

Approximately 15–30 minutes to read and practice with examples.

---

## Difficulty Level

Intermediate

---

# Step-by-Step Instructions

### 1. Understanding Generated Field Helpers

For each model struct you define, GORM CLI generates a companion `generated.ModelName` struct containing typed fields representing columns and associations. Each field helper exposes several methods:

- **Predicates**: For filtering (`Eq`, `Gt`, `Like`, `IsNull`, `Between`, etc.)
- **Setters**: For update and create operations (`Set(value)`, `Incr(amount)`, `SetExpr(expr)`, etc.)

Example generated field helpers (from `User` model):

```go
generated.User.ID.Eq(1)                 // id = 1
generated.User.Name.Like("%jinzhu%") // name LIKE '%jinzhu%'
generated.User.Age.Between(18, 65)      // age BETWEEN 18 AND 65
generated.User.Score.IsNull()             // score IS NULL (supports sql.NullInt64)
```

Use these helpers inside GORM query methods like `Where` or inside `Set(...)` to build atomic operations.

### 2. Filtering Records Using Predicates

To query records with field helpers:

- Use `generated.Model.Field.Predicate(...)` inside `.Where(...)`
- Combine multiple predicates with comma syntax to represent AND logic.

Example - Find active users over 18:

```go
users, err := gorm.G[models.User](db).
  Where(
    generated.User.Age.Gt(18),
    generated.User.Role.Eq("active"),
  ).
  Find(ctx)
```

Verify the returned slice contains only matched users.

### 3. Updating Records with Setters

When updating records, use the `Set(...)` method on GORM queries with generated setters for field updates. This method groups multiple update assignments safely.

Example - Flip user role from "pending" to "active":

```go
gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Set(
    generated.User.Role.Set("active"),
  ).
  Update(ctx)
```

You can pass multiple setters inside one `Set(...)` call, including zero-value fields and expressions.

### 4. Creating New Records with Setters

Field helpers support creating new records by calling `.Set(...)` followed by `.Create(ctx)`, setting fields explicitly.

Example - Create user with zero and non-zero values:

```go
gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Age.Set(0),
    generated.User.IsAdult.Set(false),
    generated.User.Role.Set("active"),
  ).
  Create(ctx)
```

This ensures the created record has all fields set as expected — including default or falsey values.

### 5. Using Advanced Setters: Expressions & Increment

To perform more complex updates such as incrementing a field or using raw SQL expressions, use:

- `.SetExpr(clause.Expr{SQL: ..., Vars: ...})` for any SQL expression
- `.Incr(n)` to increment number fields

Example - Increment a user’s age by 1:

```go
gorm.G[models.User](db).
  Where(generated.User.Name.Eq("bob")).
  Set(generated.User.Age.Incr(1)).
  Update(ctx)
```

Example - Use custom SQL expression:

```go
gorm.G[models.User](db).
  Where(generated.User.Name.Eq("carol")).
  Set(
    generated.User.Age.SetExpr(clause.Expr{SQL: "GREATEST(?, 18)", Vars: []any{clause.Column{Name: "age"}}}),
  ).
  Update(ctx)
```

### 6. Handling Zero Values Explicitly

When updating fields to zero values (`0`, `false`, `""`, or `sql.NullInt64{}` with `Valid=false`), always use the `Set(...)` syntax to explicitly set those values.

Example — reset fields to zero values:

```go
err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("alice")).
  Set(
    generated.User.Age.Set(0),
    generated.User.IsAdult.Set(false),
    generated.User.Role.Set(""),
    generated.User.Score.Set(sql.NullInt64{}),
  ).
  Update(ctx)
```

This avoids ambiguity that might occur with partial updates.

### 7. Combining Multiple Predicates and Setters

You can compose complex queries by combining multiple predicates and setters naturally:

```go
// Filter users by multiple conditions
users, err := gorm.G[models.User](db).
  Where(
    generated.User.Age.Gt(18),
    generated.User.Role.Eq("active"),
  ).
  Find(ctx)

// Update multiple fields together
rows, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Set(
    generated.User.Role.Set("active"),
    generated.User.IsAdult.Set(true),
  ).
  Update(ctx)
```

### 8. Using Field Helpers with Associations

Field helpers extend to associations, enabling operations like `Create`, `Update`, `Unlink`, and `Delete` on related models seamlessly inside the same query chain.

Example - Create a user with a pet:

```go
gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).
  Create(ctx)
```

Further association usage is described in the guide [Managing Associations with Helpers](https://docs.gorm.io/cli/guides/core-workflows/association-operations).

---

# Examples

```go
// Find all active users over 18
var activeAdults []models.User
result := gorm.G[models.User](db).
  Where(
    generated.User.Age.Gt(18),
    generated.User.Role.Eq("active"),
  ).
  Find(ctx)
if result.Error != nil {
  log.Fatal(result.Error)
}

// Update all users with role "pending" to "active"
rowsAffected, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Set(generated.User.Role.Set("active")).
  Update(ctx)
if err != nil {
  log.Fatal(err)
}
fmt.Printf("Updated %d users\n", rowsAffected)

// Increment "age" of user named "bob" by 3
_, err = gorm.G[models.User](db).
  Where(generated.User.Name.Eq("bob")).
  Set(generated.User.Age.Incr(3)).
  Update(ctx)
if err != nil {
  log.Fatal(err)
}

// Create new user with zero values explicitly
err = gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("newuser"),
    generated.User.Age.Set(0),
    generated.User.IsAdult.Set(false),
    generated.User.Role.Set("pending"),
  ).
  Create(ctx)
if err != nil {
  log.Fatal(err)
}

// Query users where "score" is null
usersWithNullScore, err := gorm.G[models.User](db).
  Where(generated.User.Score.IsNull()).
  Find(ctx)
if err != nil {
  log.Fatal(err)
}
```

---

# Troubleshooting & Tips

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Queries Return No Results or Unexpected Data">
Ensure you are using the correct generated field helper for filtering. The predicates are strongly typed and require exact usage. Check for typos in predicate calls like `Eq()`, `Gt()`. Verify your database state matches predicate conditions.
</Accordion>
<Accordion title="Updates Do Not Persist or Update Unexpected Rows">
Use `Set(...)` to explicitly define fields to update. When updating to zero-values (e.g., empty string, zero int, false bool), always use setters inside `Set(...)` to avoid unintentionally skipping those fields.
</Accordion>
<Accordion title="Compile Errors Using Generated Helpers">
Make sure the generated code is successfully regenerated after changing models or interfaces. Re-run the `gorm gen` command with the correct input and output flags. Import the generated package correctly.
</Accordion>
<Accordion title="Increments or SQL Expressions Fail to Apply">
Verify you are using the correct setter methods `.Incr()` or `.SetExpr()`. When using SQL expressions, ensure SQL syntax and variables are correctly specified in `clause.Expr`. Check that your database supports the used SQL.
</Accordion>
</AccordionGroup>

<Tip>
**Best Practices:**
- Always use field helpers together with GORM's context (`ctx`) to leverage cancellation and deadlines.
- Use multiple predicates in `.Where()` calls separated by commas to combine filters with AND logic.
- Prefer `Set(...)` for all updates or creates to maintain clarity and consistency.
- Combine association helpers with field helpers for powerful, type-safe relational operations.
- Use generated helpers to minimize raw string queries and reduce human errors.
</Tip>

---

# Next Steps & Related Content

- Explore [Writing Type-Safe Queries from Interfaces](https://docs.gorm.io/cli/guides/core-workflows/writing-type-safe-queries) to complement field helpers usage.
- Learn how to [Manage Associations with Helpers](https://docs.gorm.io/cli/guides/core-workflows/association-operations) for complex model relationships.
- Customize generation with the [Customizing Generation via Config](https://docs.gorm.io/cli/guides/advanced-usage-patterns/customizing-generation-config) guide.
- Validate your first generated code using [Quick Validation & Example Run](https://docs.gorm.io/cli/getting-started/first-steps/first-validation).

Refer to the overview on [GORM CLI Product Purpose and Value](https://docs.gorm.io/cli/overview/product-intro-value/product-purpose) to reaffirm the benefits of your generated helpers.

---