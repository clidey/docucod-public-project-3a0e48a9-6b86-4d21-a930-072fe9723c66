---
title: "Working with Model-Driven Field Helpers"
description: "Master the use of generated helpers for filtering, updating, ordering, and managing fields and associations. Covers common patterns for reads, writes, and updates using the generated fluent APIs."
---

# Working with Model-Driven Field Helpers

Master the use of generated helpers for filtering, updating, ordering, and managing fields and associations. This guide covers common patterns for reading, writing, and updating your data models using the generated fluent APIs from GORM CLI.

---

## 1. Overview

### Task Description
This guide helps you leverage the model-driven field helpers generated by GORM CLI for concise, type-safe database operations. You'll learn how to construct expressive queries, perform updates and creations with zero-value handling, and manage complex associations—all using the strongly typed fluent API.

### Prerequisites
- You have installed GORM CLI and generated the code for your models.
- You have Go models annotated and prepared for code generation.
- Familiarity with basic GORM usage.

### Expected Outcome
By following this guide, you'll confidently use generated field helpers to:
- Filter/select data with composable predicates
- Update records with zero values and SQL expressions
- Create records with typed field setters
- Manage associations with fluent operations

### Time Estimate
About 20-30 minutes to walk through examples and try out patterns.

### Difficulty Level
Intermediate — basic knowledge of GORM and Go generics is helpful.

---

## 2. Using Field Helpers for Queries

Model-driven field helpers provide methods to express predicates and setters for each model field.

### Common Predicate Examples
```go
// Basic filters
generated.User.Age.Gt(18)          // age > 18
generated.User.Role.Eq("active") // role = "active"

// Combine filters with Where
users, err := gorm.G[models.User](db).
  Where(generated.User.Age.Gt(18), generated.User.Role.Eq("active")).
  Find(ctx)
```

This returns users older than 18 with active roles.

### Counting Rows
Use the fluent Count method:

```go
count, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("active")).
  Count(ctx, "*")
```

Expected count matches the filtered users.

### Filtering on Null Fields
Field helpers support IS NULL/IS NOT NULL checks:

```go
// Users with no last login recorded
usersWithNullLastLogin, err := gorm.G[models.User](db).
  Where(generated.User.LastLogin.IsNull()).
  Find(ctx)
```

This is safer than writing raw SQL conditions.

---

## 3. Updating Records With Helpers

Field helpers are invaluable for updating fields, including zero-values and SQL expressions.

### Update Using Where and Field Names
To update rows matching conditions:

```go
_, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Update(ctx, "role", "active")
```

This promotes pending users to active.

### Update with Set Assignments
Set allows typed setting of fields, improving readability and safety:

```go
rows, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Set(
    generated.User.Role.Set("active"),
  ).
  Update(ctx)
```

This updates all pending roles to active and returns the number of affected rows.

### Combining Expressions and Zero Values
You can mix zero-value updates and SQL expressions smoothly:

```go
rows, err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("cathy")).
  Set(
    generated.User.Role.Set(""),               // zero string
    generated.User.IsAdult.Set(false),           // zero bool
    generated.User.Score.Set(sql.NullInt64{}),   // NULL
    generated.User.Age.SetExpr(clause.Expr{SQL: "age + ?", Vars: []any{2}}),
  ).
  Update(ctx)
```

The above increments Cathy’s age by 2 and resets several fields.

### Increment Fields Directly
Helper methods simplify increments:

```go
_, err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("bob")).
  Set(
    generated.User.Age.Incr(3),
  ).
  Update(ctx)
```

This increments Bob’s age by 3 in a single update.

### Using String Modifiers
For string fields, you can perform transformations like uppercase:

```go
rows, err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("alice")).
  Set(
    generated.User.Name.Upper(),
  ).
  Update(ctx)
```

Alice’s name becomes uppercase.

---

## 4. Creating Records with Set Helpers

You can create records by setting field values fluently:

```go
err := gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("set_user"),
    generated.User.Age.Set(29),
    generated.User.Role.Set("active"),
    generated.User.IsAdult.Set(true),
    generated.User.Score.Set(sql.NullInt64{Int64: 99, Valid: true}),
  ).
  Create(ctx)
```

This safely inserts a new user with all specified fields, including nullable Score.

---

## 5. Managing Associations Using Field Helpers

Field helpers also generate association helpers for related models, enabling operations such as Create, Update, Unlink, Delete, and CreateInBatch.

### Create and Link Associations
Create a new user and simultaneously create and associate a pet:

```go
gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).
  Create(ctx)
```

### Batch Create Associations
Link multiple languages to a user:

```go
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(
    generated.User.Languages.CreateInBatch([]models.Language{{Code: "EN"}, {Code: "FR"}}),
  ).
  Update(ctx)
```

### Update Associated Rows
Update a user’s pet named "fido":

```go
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(
    generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).
      Update(generated.Pet.Name.Set("rex")),
  ).
  Update(ctx)
```

### Unlink and Delete Associations
- **Unlink:** Remove associations without deleting the related rows.
- **Delete:** Delete associated rows (or join rows for many2many).

Examples:

```go
// Unlink all pets from user ID = 1
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Unlink()).
  Update(ctx)

// Delete all pets named "old" for user ID = 1
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("old")).Delete()).
  Update(ctx)
```

### Conditional Unlink/Delete
You can filter associated rows before unlinking or deleting:

```go
// Only unlink pet named "fido"
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).Unlink()).
  Update(ctx)
```

### Semantics by Association Type
- *Belongs To:* Unlink clears the parent FK; Delete removes the linked row
- *Has One / Has Many:* Unlink clears the child FK; Delete removes child rows
- *Many2Many:* Unlink/Delete remove join table rows only

---

## 6. Best Practices and Tips

- Always prefer generated predicates over raw SQL strings for safety and maintainability.
- Use `Set()` with generated setters to avoid errors when updating zero values.
- Combine multiple `Set()` invocations together for complex updates.
- For JSON or custom types, use mapped field helpers (see JSON example in the JSON Field Mapping example).
- Efficiently batch create linked data using `CreateInBatch` on slice associations.
- Use `Unlink()` to detach associations without deleting data — essential for relationship management.
- Test your queries with context cancellations and timeouts to handle real-world scenarios.

---

## 7. Troubleshooting Common Issues

<AccordionGroup title="Common Issues with Field Helpers">
<Accordion title="Set().Update does not update any rows">
Make sure your `Where()` clause matches intended rows. Verify predicates with `.Find()` before calling `.Update()`.
</Accordion>
<Accordion title="Zero values are ignored in updates">
Use the `Set()` method with `.Set(field.Set(zeroValue))` to explicitly update zero or NULL values.
</Accordion>
<Accordion title="Association unlink or delete not working">
Confirm your association is supported and you are targeting the correct association helper. Also, ensure your DB schema allows FK nullability or cascading deletes if applicable.
</Accordion>
<Accordion title="JSON field predicates fail on SQLite">
SQLite requires the JSON1 extension. If unsupported, the query will error. Consider fallback or test extensions.
</Accordion>
</AccordionGroup>

---

## 8. Examples

### Query Users Over 18 and Active
```go
var activeAdults []models.User
err := gorm.G[models.User](db).
  Where(generated.User.Age.Gt(18), generated.User.Role.Eq("active")).
  Find(ctx)
```

### Update Role from "pending" to "active"
```go
_, err := gorm.G[models.User](db).
  Where(generated.User.Role.Eq("pending")).
  Set(generated.User.Role.Set("active")).
  Update(ctx)
```

### Increment Age by 1
```go
_, err := gorm.G[models.User](db).
  Where(generated.User.Name.Eq("bob")).
  Set(generated.User.Age.Incr(1)).
  Update(ctx)
```

### Create a User with a Pet
```go
err := gorm.G[models.User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).
  Create(ctx)
```

### Unlink Specific Pet
```go
gorm.G[models.User](db).
  Where(generated.User.ID.Eq(1)).
  Set(generated.User.Pets.Where(generated.Pet.Name.Eq("fido")).Unlink()).
  Update(ctx)
```

---

## 9. Next Steps & Related Content

- Explore [Managing Associations and Relationships](/guides/core-workflows/association-operations) for deeper coverage of association helper operations.
- Dive into [Type-Safe Queries with Interfaces](/guides/core-workflows/type-safe-queries) to combine interface-driven queries with field helpers.
- Learn [Customizing Code Generation with Config](/guides/advanced-usage/customizing-generation) to tailor generation for your project's needs.
- Refer to [Integration with GORM](/overview/integration-and-use/integration-overview) to maximize interoperability between GORM and generated helpers.

---

## 10. References

- [GORM CLI README](https://github.com/go-gorm/cli)
- [Model-Driven Field Helpers Source Example](https://github.com/go-gorm/cli/blob/main/examples/output/models/user.go)
- [Code Generation Configuration](https://gorm.io/cli/gorm/genconfig)

---

Reach out to the GORM community or file issues on the repository for further support or feature requests.
