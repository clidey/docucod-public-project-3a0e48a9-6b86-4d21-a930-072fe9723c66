---
title: "Quick Setup & First Generation"
description: "Set up your environment, install GORM CLI, and run your first code generation. This guide walks you through creating query interfaces, defining models, and understanding generator outputs for immediate productivity."
---

# Quick Setup & First Generation

Set up your environment, install GORM CLI, and run your first code generation. This guide walks you through creating query interfaces, defining models, and understanding generator outputs for immediate productivity.

---

## 1. Overview

### What You Will Achieve
By following this guide, you will:
- Prepare your Go project and environment for GORM CLI
- Install the GORM CLI tool
- Define SQL-annotated query interfaces and Go models
- Run `gorm gen` to generate type-safe query APIs and field helpers
- Understand the generated output and start using it in your project

### Prerequisites
- Go 1.18 or newer installed
- Basic familiarity with Go modules and struct definitions
- A Go project configured to use GORM or ready to adopt it
- (Optional) Basic understanding of SQL and templating

### Expected Outcome
You will have a working GORM CLI code generation setup producing strongly typed query interfaces and helpers that enhance your database interaction safety and developer experience.

### Time Estimate
Approximately 15–30 minutes, depending on setup speed and environment.

### Difficulty Level
Beginner to Intermediate

---

## 2. Step-by-Step Instructions

### Step 1: Prepare Your Project Structure
- Organize your Go source files so that your models and SQL query interfaces are logically grouped, ideally in the same package or directory.

Example:
```plaintext
myproject/
  ├─ models/
  │    └─ user.go
  ├─ queries/
       └─ query.go
```

> Tip: Keeping models and query interfaces close simplifies import paths and generation.

### Step 2: Define Your Models
Create Go structs representing your database tables.
- Include GORM tags and necessary metadata.
- Example model `User`:
  ```go
  package models

  import (
      "gorm.io/gorm"
  )

  type User struct {
      gorm.Model
      Name  string
      Age   int
      Email string
  }
  ```

### Step 3: Write Query Interfaces with SQL Annotations
- Create interfaces with methods documented using SQL templates in comments.
- Use placeholders for query parameters.

Example query interface:
```go
package queries

import "myproject/models"

// Query[T any] defines type-safe query methods for models.
type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)

  // SELECT * FROM @@table WHERE name=@name AND age>@age
  FilterByNameAndAge(name string, age int) ([]T, error)

  // UPDATE @@table
  // {{set}}
  //   {{if user.Name != ""}} name=@user.Name, {{end}}
  //   {{if user.Age > 0}} age=@user.Age {{end}}
  // {{end}}
  // WHERE id=@id
  UpdateUser(user models.User, id int) error
}
```

> Note: The `@@table` keyword automatically resolves to the table name of the struct.

### Step 4: Install GORM CLI
Ensure Go 1.18+ is installed, then install the CLI:

```bash
  go install gorm.io/cli/gorm@latest
```

Verify installation:
```bash
  gorm --help
```

### Step 5: Run the Code Generation Command
Use the `gorm gen` command to generate code.
- `-i` (or `--input`) specifies the directory containing your interfaces and models.
- `-o` (or `--output`) defines where to place generated code (defaults to `./g`).

Example:
```bash
  gorm gen -i ./queries -o ./generated
```

Successful execution creates generated Go code with:
- Type-safe query implementations for your interfaces
- Field helpers for your models

> Warning: You must specify the input directory with the `-i` flag; omitting it results in an error.

### Step 6: Review the Generated Output
- Generated files appear in your output directory (e.g., `./generated`).
- Check for:
  - Interfaces suffixed with `Interface` and their implementations.
  - Model helpers enabling fluent query predicates and update setters.

Example generated usage snippet in your app:
```go
  import (
      "gorm.io/gorm"
      "myproject/generated"
      "myproject/models"
  )

  func fetchUserByID(db *gorm.DB, id int) (models.User, error) {
    return generated.Query[models.User](db).GetByID(context.Background(), id)
  }
```


### Step 7: Integrate and Use Generated APIs
- Use the generated query methods to perform type-safe, efficient DB queries.
- Combine with GORM's `db` instance and context.
- Use model helpers for building queries or updates.

Example:
```go
// Get user with ID=10
user, err := generated.Query[models.User](db).GetByID(ctx, 10)
if err != nil {
    // handle error
}

// Update user name
err = generated.Query[models.User](db).UpdateUser(ctx, models.User{Name: "Alice"}, 10)
if err != nil {
    // handle error
}
```

---

## 3. Understanding the Generator Output

### What Is Generated?
- **Query Interfaces & Implementations:** For all SQL-annotated interfaces, providing methods that execute your declared queries.
- **Field Helpers:** Strongly typed field predicates and setters for your models enabling fluent API construction.

### Example: Generated Helper Usage
```go
// Predicate: WHERE age > 18
db.Where(generated.User.Age.Gt(18)).Find(&users)

// Set a field for update
db.Set(generated.User.Name.Set("Bob")).Where(generated.User.ID.Eq(1)).Update(&models.User{})
```

> Tip: Generated code respects SQL templates' semantics and automatically injects context parameters if omitted by the user.

---

## 4. Troubleshooting & Best Practices

### Common Issues

- **Error: input flag missing**
  - Ensure you provide `-i` or `--input` with the directory containing your query interfaces.

- **Code generation fails or output empty**
  - Confirm your query interfaces have properly structured SQL templates in comments.
  - Verify your model structs are correctly imported and resolvable.

- **Generated code does not compile**
  - Check your Go modules and dependencies.
  - Make sure GORM and dependencies are compatible with your Go version.

- **Method call missing context parameter at runtime**
  - GORM CLI injects `context.Context` automatically if missing; ensure you pass a valid context to generated methods.

### Best Practices

- Keep models and query interfaces in the same package or directory for simpler generation.
- Use the `@@table` and `@param` syntax consistently in SQL templates.
- Leverage conditional templates (`{{if}}`, `{{where}}`) in SQL comments to express optional filters and dynamic queries.
- Use generation config to customize output paths or field mappings as projects scale.

> Tip: Consult the [Basic Generation Config](https://docs.gorm.io/guides/getting-started/optional-configuration/basic-configuration) guide to tailor generation to your project.

---

## 5. Next Steps & Related Content

- After mastering initial generation, explore:
  - [Using Type-Safe Query APIs](https://docs.gorm.io/guides/getting-started-workflows/using-type-safe-queries) to harness the full power of generated methods
  - [Field Helpers for Filters and Updates](https://docs.gorm.io/guides/getting-started-workflows/field-helper-basics) to build dynamic query predicates
  - [Customization and Generation Config](https://docs.gorm.io/guides/advanced-usage-patterns/customization-and-config) for project-specific tuning
  - [Troubleshooting & Common Issues](https://docs.gorm.io/guides/getting-started-essentials/troubleshooting) for resolving setup or generation errors

- Refer to [What is GORM CLI?](https://docs.gorm.io/overview/product-intro-and-value/what-is-gorm-cli) for an in-depth introduction.

- Validate your setup quickly using [Quick Validation Steps](https://docs.gorm.io/getting-started-essentials/quick-validation).

---

## 6. Summary Diagram of the First Generation Workflow

```mermaid
flowchart TD
  A[Start: Setup Project Structure] --> B[Define Go Models]
  B --> C[Write SQL-Annotated Interfaces]
  C --> D{Install GORM CLI?}
  D -->|No| E[Run `go install gorm.io/cli/gorm@latest`]
  E --> F[Run Code Generation Command (`gorm gen`)]
  D -->|Yes| F
  F --> G[Generated Output Files]
  G --> H[Review Generated Query Interfaces & Helpers]
  H --> I[Integrate & Use Generated APIs]
  I --> J[Build Safer, Type-Safe DB Queries]
  J --> K[Success]
```

---

## 7. Reference Code Snippet Example

```go
package main

import (
    "context"
    "fmt"
    "gorm.io/driver/sqlite"
    "gorm.io/gorm"
    "myproject/generated"
    "myproject/models"
)

func main() {
    // Setup GORM DB connection
    db, err := gorm.Open(sqlite.Open("test.db"), &gorm.Config{})
    if err != nil {
        panic(err)
    }

    ctx := context.Background()

    // Use the generated query to fetch a user by ID
    user, err := generated.Query[models.User](db).GetByID(ctx, 1)
    if err != nil {
        fmt.Println("Error fetching user:", err)
        return
    }

    fmt.Println("User fetched:", user)

    // Update the user's name
    err = generated.Query[models.User](db).UpdateUser(ctx, models.User{Name: "Alice"}, 1)
    if err != nil {
        fmt.Println("Error updating user:", err)
        return
    }

    fmt.Println("User updated successfully")
}
```

---

# Callout
<Tip>
Ensure your Go project uses Go modules and all necessary dependencies including `gorm.io/gorm` are installed before running generation.
</Tip>

<Note>
You do not need to write or generate field helpers manually — GORM CLI automatically creates them from your models.
</Note>
