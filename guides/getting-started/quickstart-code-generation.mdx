---
title: "Quickstart: Code Generation Workflow"
description: "Walk through the complete code generation workflow, from writing query interfaces and defining models to producing and consuming generated APIs in real projects. This tutorial uses concrete examples to help you generate type-safe query APIs and field helpers for your models."
---

# Quickstart: Code Generation Workflow

Welcome to the Quickstart guide for the **GORM CLI Code Generation Workflow**. This guide walks you through the entire process of generating type-safe query APIs and model-driven field helpers, starting from writing query interfaces and models, running the generator, to consuming the generated APIs in your Go projects.

By following this tutorial, you will gain hands-on experience producing fluent, discoverable, and compile-time safe database access code with GORM CLI.

---

## 1. Workflow Overview

### What This Guide Helps You Accomplish

- Define your Go models and query interfaces with embedded SQL templates.
- Generate type-safe, interface-driven query APIs and model-based field helpers.
- Use the generated APIs to perform database operations with compile-time safety.

### Prerequisites

- Go 1.18 or newer installed (to support generics used by GORM CLI).
- Your project should have your GORM models and corresponding query interface(s).
- GORM CLI installed (`go install gorm.io/cli/gorm@latest`).
- Basic familiarity with GORM concepts (models, associations).

### Expected Outcome

By completing this guide, you will:
- Have generated Go code that includes query interface implementations and field helpers.
- Understand how to call generated query methods and perform CRUD operations.
- Be equipped to customize and extend generated code for your GORM projects.

### Time Estimate

Approximately 15–30 minutes, including setup and running examples.

### Difficulty Level

Beginner to Intermediate — No prior GORM CLI experience required, but some Go & GORM familiarity recommended.

---

## 2. Step-by-Step Instructions

<Steps>
<Step title="Define Your Query Interface and Models">
Start by creating a Go interface with methods that include SQL templates embedded in comments. Define your models in the same package or directory. This interface drives the generation of type-safe query APIs.

```go
// examples/query.go
// Query interface with SQL templates
 type Query[T any] interface {
  // SELECT * FROM @@table WHERE id=@id
  GetByID(id int) (T, error)

  // where("name=@name AND age=@age")
  FilterByNameAndAge(name string, age int)
 }

// examples/models/user.go
// User model definition
 type User struct {
  gorm.Model
  Name string
  Age  int
 }
```

<Tip>
Place query interfaces and models in the same directory/package for GORM CLI to locate and generate code correctly.
</Tip>

<Check>
Verify your SQL templates follow supported DSL directives like `@@table`, `@param`, `{{where}}`, and `{{set}}`.
</Check>

</Step>

<Step title="Run the Code Generator">
Use the `gorm gen` command to generate code, specifying input files and output directory.

```bash
gorm gen -i ./examples -o ./generated
```

- `-i` points to the directory containing your interface and models.
- `-o` specifies where to place generated code.

<Note>
If you skip the `-o` flag, the default output directory is `./g`.
</Note>

<Warning>
Ensure the input directory includes your interfaces; otherwise, the generator will fail.
</Warning>

After execution, check the `./generated` folder (or your specified path) for generated Go files.

<Check>
You should see files with generated query implementations and model field helpers.
</Check>

</Step>

<Step title="Consume the Generated APIs in Your Project">
Import the generated package and use the fluent, type-safe query methods and field helpers to interact with your database.

Example usage:

```go
// Fetch user by ID using generated Query API
user, err := generated.Query[User](db).GetByID(ctx, 123)
if err != nil {
    // handle error
}

// Use generated field helpers in standard GORM queries
users, err := gorm.G[User](db).
    Where(generated.User.Age.Gt(18)).
    Find(ctx)
```

<Tip>
Notice how generated helpers like `generated.User.Age.Gt(18)` enhance readability and type safety.
</Tip>

<Check>
Verify no runtime errors and that generated APIs return expected data.
</Check>

</Step>
</Steps>

---

## 3. Concrete Examples

### Query Interface Example

```go
// Query interface with embedded SQL
// SELECT * FROM @@table WHERE id=@id
GetByID(id int) (T, error)

// WHERE clause from direct filter
FilterByNameAndAge(name string, age int)
```

### Model Example

```go
type User struct {
    gorm.Model
    Name string
    Age  int
}
```

### Generation Command

```bash
gorm gen -i ./examples -o ./generated
```

### Generated API Usage Example

```go
// Use generated Query API
u, err := generated.Query[User](db).GetByID(ctx, 123)

// Use model-driven field helpers
users, err := gorm.G[User](db).Where(generated.User.Age.Gt(18)).Find(ctx)
```

### Association Operations Example

```go
gorm.G[User](db).
  Set(
    generated.User.Name.Set("alice"),
    generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
  ).
  Create(ctx)
```

---

## 4. Best Practices & Tips

- **Keep Interfaces and Models Together**: Organize your models and query interfaces in the same directory for seamless generation.

- **Use Template DSL Directives**: Leverage `@@table`, `@param`, `{{where}}`, and other directives to write expressive SQL in your interfaces.

- **Incremental Query Building**: Generated APIs allow chaining and fluent syntax; use `.Where()`, `.Set()`, `.Update()` effectively.

- **Test Generated Code**: Always verify generated code compiles and passes runtime tests.

- **Customize via genconfig.Config**: For advanced usage, override defaults like output path and type mappings by defining `genconfig.Config` in your package.

- **Watch for Association Semantics**: Understand how `Unlink()`, `Delete()`, and batch operations behave on associations.

<Tip>
Invest time in writing clear SQL templates in query interfaces to unlock the full potential of type safety and maintainability.
</Tip>

---

## 5. Troubleshooting

### Common Issue: Generator Reports Missing Interfaces
- **Cause**: Your input path may be wrong or interface not properly defined.
- **Fix**: Verify the interface file location, and ensure it contains methods with embedded SQL templates.

### Common Issue: Generated Code Fails at Compile Time
- **Cause**: Incorrect import paths or missing dependencies.
- **Fix**: Check your module setup and dependencies; make sure `gorm.io/gorm` and `gorm.io/cli/gorm` are included properly.

### Common Issue: SQL Template Parsing Errors
- **Cause**: Syntax errors or unsupported DSL usage in SQL templates.
- **Fix**: Validate your SQL template comments, follow GORM CLI SQL template DSL syntax, and check for typos.

<Tip>
Enable verbose logging or check generated files manually to debug complex issues.
</Tip>

---

## 6. Next Steps & Related Content

- **Using Generated APIs:** Learn how to effectively use field helpers, filters, updates, and associations ([Using Generated APIs Guide](../using-generated-apis/field-helpers-basics)).
- **Customizing Generation:** Explore configuration options with `genconfig.Config` for advanced control ([Customizing Code Generation](../advanced-usage-best-practices/customizing-generation)).
- **Template-Based Queries:** Dive deeper into SQL template DSL to write flexible queries ([Template-Driven Queries](../using-generated-apis/template-based-queries)).

Expand your mastery by reviewing system architecture, configuration, and core concepts in other guides within this documentation.

---

<CardGroup cols={2}>
  <Card title="Project Setup and Preparation">
    Learn how to prepare your project layout and declare models/interfaces.
    [Prepare Your Project](../../getting-started/first-usage-configuration/project-structure)
  </Card>
  <Card title="Use Generated Code">
    Step-by-step guide on importing and calling generated APIs.
    [Using Generated APIs](../../getting-started/first-usage-configuration/using-generated-code)
  </Card>
</CardGroup>

<Info>
  Refer to the official GORM CLI repository for sample projects and latest updates:
  [GORM CLI on GitHub](https://github.com/go-gorm/cli)
</Info>
