---
title: "Integration with GORM & Configuration"
description: "Explains how GORM CLI-generated code integrates seamlessly with `gorm.io/gorm`, what configuration options are available (like `genconfig.Config`), and how outputs can be customized through package- or file-level settings. Clarifies how and where the generator discovers models/interfaces to operate on."
---

# Integration with GORM & Configuration

## Unlocking Seamless Code Generation with GORM CLI

GORM CLI-generated code integrates tightly with the `gorm.io/gorm` library to empower Go developers building applications with the GORM ORM. This documentation explains how the generator-produced code fits naturally into your project’s GORM workflow, the configuration options available to tailor generation behavior, and how you control what models or interfaces get included during generation.

---

## Why Integration Matters

Beyond merely producing code, GORM CLI complements and extends GORM itself by automatically generating type-safe, fluent query APIs and field helpers that look and feel like first-class GORM constructs. You use the generated code as if it were part of GORM’s official API, unlocking compile-time safety and productivity without learning a new DSL.

The integration means:

- Generated interfaces and structs embed or wrap `gorm.Interface` implementations.
- Query APIs directly extend the builder pattern familiar to GORM users.
- Field helpers generate strongly typed, intuitive predicate and update builders for your models.

---

## How the Generated Code Works with `gorm.io/gorm`

When you generate code, the output includes Go packages with helper types and interface implementations that embed GORM’s existing query interface. For example, a generated interface implementation struct directly embeds a `gorm.Interface[T]`, preserving all GORM methods while adding your generated methods on top.

This makes the generated code interoperable with existing GORM query chains. You build on `*gorm.DB` instances, invoke generated query methods, then seamlessly continue filtering, ordering, or executing queries using standard GORM calls.

### Example: Generated Interface Wrapper

```go
func Query[T any](db *gorm.DB, opts ...clause.Expression) QueryInterface[T] {
	return QueryImpl[T]{
		Interface: gorm.G[T](db, opts...),
	}
}

type QueryInterface[T any] interface {
	gorm.Interface[T]
	// Methods generated from your interface definitions here
}

type QueryImpl[T any] struct {
	gorm.Interface[T]
}

func (e QueryImpl[T]) GetByID(id int) (T, error) {
	// Implementation delegating to GORM query chain
}
```

Here, `QueryImpl[T]` embeds `gorm.Interface[T]` (a type alias on top of `*gorm.DB`), ensuring all standard GORM methods are available, plus your generated methods like `GetByID`.

---

## Configuring Generation with `genconfig.Config`

While the generator works out of the box without configuration, customizing your generation is easily done by defining a `genconfig.Config` variable in the same package to be scanned. The generator discovers this automatically.

This configuration enables you to:

- Override output paths on a per-package basis.
- Control exactly which interfaces and structs are included or excluded via whitelists or blacklists.
- Map specific Go field types to custom field helpers.
- Map field names (via struct tags) to specialized field helpers.
- Scope configuration to apply at package or file levels.


### Sample `genconfig.Config` Declaration

```go
package examples

import (
	"database/sql"
	"gorm.io/cli/gorm/field"
	"gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
	OutPath: "examples/generated",
	FieldTypeMap: map[any]any{
		sql.NullTime{}: field.Time{},
	},
	FieldNameMap: map[string]any{
		"json": JSON{}, // custom field helper for `gen:"json"` tags
	},
	FileLevel: false, // Apply this config to the package
	IncludeInterfaces: []any{"Query*", models.Query(nil)},
	ExcludeInterfaces: []any{"*Deprecated*"},
	IncludeStructs: []any{"User", "Account*", models.User{}},
	ExcludeStructs: []any{"*DTO"},
}
```

#### Key Config Fields

| Field                | Purpose                                                                                       |
|----------------------|-----------------------------------------------------------------------------------------------|
| `OutPath`            | Overrides default `-o` output path for files in this package                                  |
| `FieldTypeMap`       | Maps Go field types to custom field helper wrappers                                          |
| `FieldNameMap`       | Maps `gen` struct tags to custom field helpers                                               |
| `FileLevel`          | If true, applies config only to the current file, otherwise the whole package                |
| `IncludeInterfaces`  | Whitelist patterns for interfaces to generate                                               |
| `ExcludeInterfaces`  | Blacklist to exclude specific interfaces (applied after whitelists)                          |
| `IncludeStructs`     | Whitelist for model structs to generate field helpers from                                   |
| `ExcludeStructs`     | Blacklist to exclude specific model structs                                                  |

---

## Discovering Models and Interfaces

The generator discovers interfaces and structs by processing the Go source files you specify with the `-i` input flag. It examines all Go files in that directory or package, parsing:

- Interfaces annotated with raw SQL comments for generation
- Struct types that serve as your data models
- Configuration literals (`genconfig.Config`) that affect behavior

### Inclusion and Exclusion Rules

The `genconfig.Config` lets you finely tune which types are processed. You can specify string patterns (shell-style globs) or typed literals to include or exclude certain interfaces or structs. For example:

```go
IncludeInterfaces: []any{"Query*"},
ExcludeInterfaces: []any{"*Deprecated*"},
IncludeStructs: []any{"User", "Account*"},
ExcludeStructs: []any{"*DTO"},
```

This ability streamlines generation in large codebases or mixed-content directories.

---

## Customizing Generated Output

You can customize output path and generation scope at the package or file level:

- **Package-Level Config**: If `FileLevel` is false (default), config applies to all files in the package.
- **File-Level Config**: When `FileLevel` is true, config applies only to the current file. This is useful in multi-type packages to have different configs per file.

Additionally, the generator respects your `OutPath` overrides, allowing you to organize generated code alongside source code or in dedicated directories.

---

## Best Practices & Tips

- **Define `genconfig.Config` in the package where your models/interfaces live.** This ensures the generator automatically picks up your desired configuration without CLI flags.
- **Use shell-style patterns carefully to target only the intended code elements.** Excessive broad patterns can increase build time or cause unexpected inclusions.
- **Leverage `FieldTypeMap` and `FieldNameMap` to provide seamless integration for special types like JSON, custom nullable types, or database serializers.**
- **Apply file-level configs if you maintain multiple disparate model sets within one package but want distinct generation outputs or behaviors.**

---

## Troubleshooting Common Scenarios

<AccordionGroup title="Common Issues and Solutions">
<Accordion title="Generated code not reflecting config changes">
Ensure your `genconfig.Config` is declared in a Go source file in the same package directory scanned by the generator. Confirm the file is saved and your generator input path includes it. The config must be an anonymous variable assignment (e.g., `var _ = genconfig.Config{...}`).
</Accordion>

<Accordion title="Generation includes unwanted structs or interfaces">
Review your `Include*` and `Exclude*` lists in the config. Remember whitelist (`Include*`) overrides blacklist. Use exact type literals or precise patterns to filter effectively, e.g., `models.User{}` or `"IQuery*"`. Avoid overlapping patterns that may cause conflicts.
</Accordion>

<Accordion title="Output code does not compile due to missing imports">
Custom field helpers or mappings may require additional import paths. The generator detects those from the typed values in `FieldTypeMap` and `FieldNameMap`. Verify that the types used here come from properly imported packages and their imports are resolvable at generation time.
</Accordion>
</AccordionGroup>

---

## Summary

This page elaborated on the integration of GORM CLI-generated code with `gorm.io/gorm`, highlighting how generated query APIs and field helpers extend existing GORM interfaces.

The configuration model via `genconfig.Config` provides fine-grained control over:

- Which interfaces and structs the generator considers
- How output paths are structured
- Custom field type and name-based mappings for special data types

Together, these features ensure the generated code fits seamlessly into your GORM-powered Go projects, enabling efficient and safe query construction.

---

For a visual overview of code generation workflow and integration points, please refer to the "System Architecture & Data Flow" documentation.


---

# Related Documentation

- [What is GORM CLI?](../introduction-concepts/what-is-gorm-cli) – Understand the core tooling and value
- [Generation Configuration](../../concepts/customization-configuration/generation-configuration) – Deep dive into config options
- [Quick Start: Generate and Use APIs](../../getting-started/first-run/quickstart-sample) – Step into hands-on code generation
- [System Architecture & Data Flow](../architecture-integration/system-architecture) – Visualize the code gen pipeline


---

# Example

Suppose you want to generate query APIs only for interfaces starting with `Query` and generate field helpers only for models named `User` and `Account`:

```go
package mypkg

import (
	"database/sql"
	"gorm.io/cli/gorm/field"
	"gorm.io/cli/gorm/genconfig"
)

var _ = genconfig.Config{
	OutPath: "generated",
	IncludeInterfaces: []any{"Query*"},
	IncludeStructs: []any{"User", "Account"},
	FieldTypeMap: map[any]any{
		sql.NullTime{}: field.Time{},
	},
}
```

When you run the generator pointed to `mypkg`, it will produce tailored, type-safe query APIs and field helpers integrated as extensions to the GORM APIs you already use daily.


---

# Summary Diagram

```mermaid
flowchart TD
	
	subgraph "GORM CLI Code Generation Flow"
		InputFiles["Go source files with interfaces & models"] --> ParseAST["Parse AST, read interfaces & structs"]
		ParseAST --> ReadConfig["Detect genconfig.Config in source"]
		ReadConfig --> FilterTypes["Apply Include/Exclude filters"]
		FilterTypes --> TemplateRender["Generate code via templates"]
		TemplateRender --> OutputFiles["Write generated Go files"]
	end
	
	OutputFiles --> IntegrateGORM["Integrate generated types with gorm.Interface"]
	IntegrateGORM --> DeveloperUsage["Use generated APIs within GORM workflows"]

	classDef process fill:#aaf,stroke:#333,stroke-width:2px;
	ParseAST,ReadConfig,FilterTypes,TemplateRender,InputFiles,OutputFiles class process;


```


---

<Check>
Remember to place your configuration variables inside the packages where your models and interfaces live for automatic detection and application.
</Check>

---

For more examples on configuring generation, see [examples/filters](https://github.com/go-gorm/cli/tree/main/examples/filters).

---

# References

- [GORM CLI GitHub Repository](https://github.com/go-gorm/cli)
- [GORM Official Website](https://gorm.io)
- [genconfig.Config Source](https://github.com/go-gorm/cli/blob/main/genconfig/config.go)
- [Internal code template example](https://github.com/go-gorm/cli/blob/main/internal/gen/template.go)

---

# Next Steps

- Explore the [Quick Start guide](../../getting-started/first-run/quickstart-sample) for hands-on generation.
- Read [Generation Configuration documentation](../../concepts/customization-configuration/generation-configuration) for advanced setups.
- Investigate [Core Concepts & Terminology](../introduction-concepts/core-concepts-terminology) to understand detailed API nuances.
