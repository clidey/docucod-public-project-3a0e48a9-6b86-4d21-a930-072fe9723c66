---
title: "Integration with GORM"
description: "Understand how the generated APIs fit into standard GORM workflows. Learn how queries, updates, and association helpers are composed on top of `gorm.io/gorm` database operations, ensuring you write idiomatic, maintainable Go code."
---

# Integration with GORM

Understanding how GORM CLI-generated APIs fit naturally into your existing GORM workflows is key to writing idiomatic, maintainable Go code that harnesses both compile-time safety and expressive query capabilities.

---

## Why Integration Matters

GORM CLI builds on top of the `gorm.io/gorm` library by generating strongly typed query methods and model-driven field helpers that plug directly into GORM's core database operations. This seamless integration means you can: 

- Use familiar GORM patterns enhanced with type safety.
- Compose queries, updates, and association operations fluently.
- Avoid boilerplate and error-prone raw SQL.

Your generated code becomes a first-class extension of GORM, preserving its power while strengthening correctness and readability.

---

## Key Concepts of Integration

### 1. Built on `gorm.Interface[T]`

Every generated query API implements `gorm.Interface[T]`, the foundational interface for GORM operations on models of type `T`. This allows the generated code to chain onto GORM methods like `Where()`, `Select()`, and `Update()` smoothly.

### 2. Fluent, Context-Aware Methods

Generated query methods automatically include a `context.Context` parameter, promoting idiomatic Go usage and enabling context cancellation, deadlines, and tracing.

### 3. Use of Model Field Helpers

Model fields become strongly typed helpers (e.g., `generated.User.Name.Eq("jinzhu")`), enabling concise and safe filter expressions and updates that integrate directly with GORM's `Where()`, `Set()`, and related methods.

### 4. Association Operations

Helpers for model associations (has one/many, belongs to, many2many) support fully typed operations such as Create, Update, Unlink, and Delete. These map precisely to GORM association semantics maintaining clarity and correctness.

---

## How Generated APIs Compose With GORM Calls

The generated APIs act as thin, strongly typed layers on top of GORM's `*gorm.DB` and its fluent API. Hereâ€™s the typical composition:

- Start with a base query or builder from the generated function (e.g., `generated.Query[User](db)`).
- Chain calls using generated predicates or association helpers.
- Use standard GORM methods for execution (`Find(ctx)`, `Update(ctx)`, `Create(ctx)`, etc.).

### Example: Querying
```go
// Using generated Query interface
user, err := generated.Query[User](db).GetByID(ctx, 123)

// Using generated field helpers with fluent chaining
users, err := gorm.G[User](db).
	Where(generated.User.Age.Gt(18)).
	Find(ctx)
```

### Example: Updating
```go
gorm.G[User](db).
	Where(generated.User.Name.Eq("alice")).
	Set(
		generated.User.Name.Set("jinzhu"),
		generated.User.Age.Incr(1),
	).
	Update(ctx)
```

### Example: Associations
```go
gorm.G[User](db).
	Where(generated.User.ID.Eq(1)).
	Set(
		generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
	).
	Update(ctx)
```

---

## Associating CRUD Semantics with GORM Operations

| Operation     | Parent Effect                        | Association Effect                           |
|---------------|------------------------------------|----------------------------------------------|
| `Create(ctx)` | Inserts new parent rows             | Applies association operations after parent creation (e.g., link related models) |
| `Update(ctx)` | Updates parent rows matched by query | Performs association updates, unlinking or deleting associated rows as specified  |

### Association Operation Details

- **Create:** Inserts and links associated rows (e.g., pets belonging to a user).
- **Update:** Updates associated rows with optional filtering.
- **Unlink:** Removes relational links without deleting rows; updates foreign keys to NULL or removes join rows.
- **Delete:** Deletes associated rows or removes join rows (for many2many).
- **CreateInBatch:** Batch creates and associates multiple new records.

---

## Practical Tips for Writing Idiomatic Code

- Always start queries and updates from the generated `gorm.G[T](db)` or interface entry points.
- Use generated field helpers for filters and setters instead of raw SQL strings to gain type safety.
- For associations, prefer the generated helpers (`Create()`, `Update()`, `Unlink()`, `Delete()`) to clearly express intent.
- Chain your query predicates before execution to compose complex filters seamlessly.
- Inject `context.Context` through all generated methods to support cancellation and observability.

---

## Step-by-Step Example: Full Usage Flow

<Steps>
<Step title="Step 1: Start with Generated Interface or Query API">
Get an entry point to your model's generated query API:
```go
tx := generated.Query[User](db)
```
</Step>
<Step title="Step 2: Compose Queries with Field Helpers">
Add filters using generated predicates:
```go
tx = tx.Where(generated.User.Name.Eq("alice"))
```
</Step>
<Step title="Step 3: Chain Updates Including Associations">
Apply updates or create related entities:
```go
tx.Set(
  generated.User.Age.Set(30),
  generated.User.Pets.Create(generated.Pet.Name.Set("fido")),
)
```
</Step>
<Step title="Step 4: Execute with Context">
Run the full operation:
```go
err := tx.Update(ctx)
```
</Step>
</Steps>

---

## Common Pitfalls and Troubleshooting

<AccordionGroup title="Troubleshooting Integration Issues">
<Accordion title="My generated code won't compile due to missing methods or types.">
Check that your Go version is 1.18 or higher and that GORM CLI is installed correctly. Make sure generated code is re-generated after model changes.
</Accordion>
<Accordion title="Queries return unexpected empty results when using generated helpers.">
Verify the generated predicates align with your database schema.
Double-check use of `gorm.G[T](db)` or interface-generated entry points.
</Accordion>
<Accordion title="Association operations don't have effect on related rows.">
Ensure your association helpers use supported methods like `Create()`, `Unlink()`, `Delete()` properly chained with `Set()`.
Confirm foreign keys and relations are correctly defined on your models.
</Accordion>
</AccordionGroup>

---

## How This Page Fits in the Documentation

This page connects the core concepts of generated APIs and model-driven helpers to the underlying GORM library workflows. It complements the walkthroughs found under guides like [Using Type-Safe Query APIs](/guides/getting-started-workflows/using-type-safe-queries) and [Working with Associations](/guides/advanced-usage-patterns/working-with-associations).

Users looking to customize generation are encouraged to consult [Basic Generation Config](/getting-started/optional-configuration/basic-configuration) and explore template-based queries in [Template-Based SQL Queries](/guides/advanced-usage-patterns/template-sql-queries).

---

## References & Next Steps

- [Overview of Integration with GORM and Go Projects](/overview/architecture-and-core-concepts/integration-with-gorm-and-go)
- [Using Type-Safe Query APIs Guide](/guides/getting-started-workflows/using-type-safe-queries)
- [Working with Associations Guide](/guides/advanced-usage-patterns/working-with-associations)
- [Basic Generation Configuration](/getting-started/optional-configuration/basic-configuration)

---

This knowledge empowers you to write database interactions that appear idiomatic and seamless within your Go codebase while guaranteeing type safety and maintainability through GORM CLI integration.
