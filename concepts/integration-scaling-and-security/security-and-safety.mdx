---
title: "Security and Safe Usage Principles"
description: "Introduces fundamental safety considerations when using code generation: keeping generated code secure, reviewing generated SQL, and best practices for safe use in collaborative environments. Understand the implications of generated SQL and template code from a security perspective."
---

# Security and Safe Usage Principles

Ensuring security and safe practices when using GORM CLI's code generation is critical to maintaining the integrity of your application and database. This guide introduces the fundamental safety considerations that every developer must keep in mind when generating and using code with GORM CLI. You will learn how to handle generated SQL securely, review code responsibly, and apply best practices for collaboration.

---

## Understanding the Security Implications of Generated Code

GORM CLI generates Go code that reflects your database queries and model operations. The generated code interacts directly with your database via SQL templates embedded in your query interfaces. While this automation boosts productivity and type safety, it also introduces security responsibilities.

**Key Considerations:**

- **Review Generated SQL Carefully:** SQL templates written as comments in your query interfaces are directly transformed into executable code. Any unsafe or unchecked input in these templates can lead to SQL injection vulnerabilities.
- **Safe Parameter Binding:** The generator uses a sophisticated SQL template DSL that automatically binds parameters safely using placeholders (`?`) rather than string interpolation. This mechanism significantly reduces risks but requires users to write proper templates.
- **Do Not Trust User Inputs for Identifiers:** Dynamic identifiers such as table or column names should be handled cautiously. Placeholders like `@@table` and `@@column` in templates resolve automatically, but passing user-controlled values directly for these can be dangerous.


## Common Security Risks and How GORM CLI Mitigates Them

| Risk                             | Mitigation in GORM CLI                                                                     |
|----------------------------------|---------------------------------------------------------------------------------------------|
| **SQL Injection via Unescaped Input** | Parametrized placeholders ensure user input does not get directly injected into SQL strings. |
| **Unsafe Dynamic SQL Fragments** | Conditional and iterative directives (`{{if}}`, `{{for}}`) require explicit conditions, reducing blind insertion of logic. |
| **Trusting Raw SQL Without Review** | You author the SQL templates; the tool generates code verbatim. Reviewing your input templates is mandatory. |


## Best Practices for Safe Use of Generated Code

### 1. Write SQL Templates with Security in Mind

- Always use parameter placeholders (`@param`) for user inputs.
- Avoid embedding unchecked strings directly into SQL (e.g., do not trust parameters as raw SQL fragments).
- Use the provided SQL template DSL directives (`@@table`, `@@column`, `{{where}}`, `{{set}}`, `{{if}}`) to ensure structure and parameter safety.

### 2. Review Generated Code Before Use

- After running `gorm gen`, inspect generated query implementations and SQL bindings (if needed) to validate parameter safety.
- Pay special attention to any methods that use dynamic SQL or complex template logic.

### 3. Use Configuration Filters Sensibly

- Use `IncludeInterfaces` and `ExcludeInterfaces` in your `genconfig.Config` to limit generation to trusted code and avoid accidental inclusion of unreviewed or legacy interfaces.

### 4. Secure Collaboration Practices

- Treat any interface with embedded SQL as code subject to security review, not just configuration.
- Enforce code reviews on interface definitions and generated output inclusions in your version control workflows.
- If multiple teams share generated code, standardize interface and model definitions with clear style and security guidelines.

### 5. Avoid Overly Dynamic SQL Construction

- Rely on the efficient parameter binding the framework provides, rather than concatenating SQL strings dynamically inside templates.
- Prefer conditional logic (`{{if}}`) over unstructured concatenation to maintain clarity and safety.

### 6. Use Strongly Typed Model Definitions

- Leverage model-driven field helpers that support safe filtering, updating, and association management with type safety.
- Avoid raw SQL update or filter strings where possible in favor of generated predicates.


## Example: Safe Template Construction with Parameters

```go
// Safe parameter binding with placeholders prevents injection
// SELECT * FROM @@table WHERE id=@id AND status=@status
GetUserByIDAndStatus(id int, status string) (User, error)

// Usage in interface comment
// SELECT * FROM @@table WHERE id=@id AND status=@status
```

This approach ensures inputs `id` and `status` are safely injected as bound parameters.


## Reviewing Generated SQL Templates Step-by-Step

1. **Check for the presence of `@param` usage:** Parameters should always be indicated with `@` and never directly concatenated into SQL.
2. **Verify that dynamic identifiers use `@@` tokens:** Such as `@@table` and `@@column` to prevent injection via identifiers.
3. **Validate conditionals (`{{if}}`) contain sensible guard expressions:** Avoid complex expressions that lean on user data in unsafe ways.
4. **Make sure loops (`{{for}}`) process trusted collections:** Prevent arbitrary injection by validating data before passing to templates.


## Common Pitfalls to Avoid

- **Inserting raw user input into SQL without placeholders.**
- **Using string formatting or concatenation to build SQL outside the template DSL.**
- **Allowing unchecked user input into `@@table` or `@@column` tokens without validation.**
- **Skipping review of complex conditional or iterative templates before generation.**


## Troubleshooting Security-Related Issues

<AccordionGroup title="Troubleshooting Security Issues">
<Accordion title="SQL Injection Suspicion">
If you suspect generated SQL may be vulnerable:
- Review the associated interface method's SQL template comment.
- Confirm that all user inputs are mapped via `@param` placeholders and not interpolated.
- Test generated queries with known malicious inputs and observe the parameter binding output.
</Accordion>
<Accordion title="Unexpected Query Behavior or Failure">
- Check for incomplete or malformed conditionals in SQL templates.
- Ensure that all blocks `{{if}}`, `{{for}}`, `{{else}}`, `{{end}}` are properly closed.
- Use provided test suites to identify flaws in generated queries.
</Accordion>
<Accordion title="Unsafe Dynamic Table or Column Names">
- Audit places where table or column names are provided dynamically.
- Use static or white-listed values wherever possible.
- Validate or sanitize any dynamic names before passing them to query methods.
</Accordion>
</AccordionGroup>


## Summary

By understanding the principles outlined here, you can confidently leverage GORM CLI to generate performant and safe database access code. Always treat your SQL templates as security-critical code, review generated outputs, and collaborate following secure coding standards.

---

## Recommended Next Steps

- Read [Writing Flexible Template-Based Queries](/guides/advanced-patterns/template-based-queries) to master secure template syntax.
- Consult [Validating Your Generated APIs](/getting-started/validation/validating-generated-code) to learn how to test and verify generated code behavior.
- Explore [Working with Model-Driven Field Helpers](/guides/core-workflows/field-helpers) for safer update and filter constructions.
- Review [Configuration and Customization](/concepts/data-model-and-extension/configuration-and-customization) to restrict generation scope and apply precise mappings.
- Follow [Troubleshooting Common Issues](/getting-started/validation/troubleshooting) for practical tips addressing generation and runtime errors.

---

## References and Resources

- [GORM CLI Architecture Overview](/concepts/architecture-core-concepts/architecture-overview)
- [SQL Template DSL & Type Mapping](/concepts/architecture-core-concepts/template-sql-dsl)
- [Integration with GORM and Your Workflows](/concepts/integration-scaling-and-security/gorm-integration-patterns)
- [Scaling Code Generation Safely and Efficiently](/concepts/integration-scaling-and-security/scalability-and-performance)

---