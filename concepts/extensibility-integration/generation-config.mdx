---
title: "Customizing Code Generation with Config"
description: "Understand how to use and structure the `genconfig.Config` declaration to control output paths, include/exclude patterns, and advanced field mapping. Learn best practices for incremental adoption and team workflows."
---

# Customizing Code Generation with Config

GORM CLI empowers you with flexible, fine-grained control over code generation through the `genconfig.Config` struct declared at the package level in your source code. This page guides you through how to use and structure this configuration, optimizing generation outputs, selectively including or excluding interfaces and structs, and mapping field types for custom handling.

---

## Why Customize Generation?

By default, GORM CLI generates query interfaces and field helpers for all supported structs and interfaces it discovers. However, most real-world projects benefit from tailoring:

- **Control output directories per package** to keep generated code organized
- **Map custom Go types or struct tag names to specialized field helpers** (e.g., JSON fields)
- **Filter generation to subsets of interfaces or structs** using includes/excludes for gradual adoption or large codebases

This configuration enables incremental migration, project-wide consistency, and extensibility to custom field behaviors.

---

## Declaring `genconfig.Config`

Declare a variable of type `genconfig.Config` in any Go source file within the package you want to configure. The generator automatically discovers and applies it.

```go
package examples

import (
    "database/sql"
    "gorm.io/cli/gorm/field"
    "gorm.io/cli/gorm/genconfig"
)

// Package-level declaration overrides generation behavior for this package
var _ = genconfig.Config{
    // Override the output path for generated files in this package
    OutPath: "examples/output",

    // Map specific Go types to custom field helpers
    FieldTypeMap: map[any]any{
        sql.NullTime{}: field.Time{},
    },

    // Map field tag names (e.g. `gen:"json"`) to field helpers
    FieldNameMap: map[string]any{
        "json": JSON{}, // custom JSON helper fields
    },

    // Whitelist or blacklist interface and struct types for generation
    IncludeInterfaces: []any{"Query*"},      // only interfaces starting with "Query"
    ExcludeInterfaces: []any{"*Deprecated*"}, // exclude deprecated interfaces
    IncludeStructs:    []any{"User", "Account*"},
    ExcludeStructs:    []any{"*DTO"},

    FileLevel: false, // when true, applies only to the file this config is declared in
}
```

---

## Config Parameters Explained

### OutPath

Overrides the directory where generated code for the current package is written. Useful for organizing generated code separate from source packages or directing output inside your repo.


### FieldTypeMap

Maps Go _type instances_ to field helper _type instances_. This lets you tell GORM CLI which helper to generate for fields with specific Go types.

- Example:

```go
FieldTypeMap: map[any]any{
    sql.NullTime{}: field.Time{},
}
```

When a struct field has `sql.NullTime` type, the generated helper will be the typed `field.Time` variant.


### FieldNameMap

Maps `gen` tag _names_ on struct fields to field helper instances.

- Fields tagged `gen:"json"` can be mapped to a custom JSON field helper type:

```go
FieldNameMap: map[string]any{
    "json": JSON{},
}
```

This lets you declare specialized field handling for fields based on naming conventions or your own annotations.


### FileLevel

When `true`, the config applies only to the single source file where declared. When `false` (default), it applies to the whole package subtree, allowing you to declare per-directory controls.


### IncludeInterfaces & IncludeStructs

Whitelists specifying exact or pattern-matching interfaces and structs to generate code for.

- Supports shell-style wildcard patterns like `Query*`, `Account*`, etc.
- Supports specifying by type literal or interface conversion, e.g., `models.Query(nil)`, `models.User{}`.

If non-empty, only matched interfaces or structs will be generated.


### ExcludeInterfaces & ExcludeStructs

Blacklists specifying interfaces or structs to skip in generation, applied after includes if present.

Supports the same pattern and type literal forms as includes.


---

## Practical Usage Scenarios

### 1. Override Output Directory for Generated Files

When your project needs generated code placed in a different directory structure, set `OutPath`:

```go
var _ = genconfig.Config{
    OutPath: "internal/generated",
}
```

This prevents clutter and allows clearer separation of generated vs. handwritten code.


### 2. Map Nullable or Custom Field Types

For a model with nullable time fields using `sql.NullTime`, generate typed helpers:

```go
var _ = genconfig.Config{
    FieldTypeMap: map[any]any{
        sql.NullTime{}: field.Time{},
    },
}
```

This mapping will produce `field.Time` helpers instead of generic ones, giving richer predicates and setters.


### 3. Use Custom Field Helpers for JSON or Other Types

Add a custom helper for JSON fields tagged with `gen:"json"`:

```go
var _ = genconfig.Config{
    FieldNameMap: map[string]any{
        "json": JSON{},
    },
}
```

On your struct:

```go
type User struct {
    Profile string `gen:"json"`
}
```

This instructs the generator to apply your JSON helper to those fields.


### 4. Selectively Generate Interfaces and Structs

Limit generation to only interfaces or structs matching patterns to incrementally migrate large code bases:

```go
var _ = genconfig.Config{
    IncludeInterfaces: []any{"Query*"},
    ExcludeInterfaces: []any{"*Deprecated*"},
    IncludeStructs:    []any{"User", "Account*"},
    ExcludeStructs:    []any{"*DTO"},
}
```


### 5. Control Generation Scope to File Level

If you want your config to only apply to the current file (not the whole package subtree):

```go
var _ = genconfig.Config{
    FileLevel: true,
    OutPath:   "custom_out",
}
```

Use this sparingly for isolated exceptions.


---

## Best Practices

- **Declare one `genconfig.Config` per package** for clarity and maintainability.
- **Use Include/Exclude filters to gradually adopt GORM CLI** on specific interfaces or model subsets.
- **Map complex or nullable types** to specialized field helpers to leverage advanced predicate and setter capabilities.
- **Avoid overlapping or conflicting filter patterns**; whitelist takes precedence over blacklist.
- **Keep output directories consistent across your project** for easier management and import paths.

---

## Common Pitfalls

<AccordionGroup title="Common Pitfalls and Troubleshooting">
<Accordion title="Config Not Being Applied">
- Ensure your `genconfig.Config` declaration is at the package level.
- The generator picks up the config only from scanned packages; ensure files are included.
- Check the `FileLevel` setting if config seems partially applied.
</Accordion>
<Accordion title="Type Mappings Not Working as Expected">
- Confirm your keys and values in `FieldTypeMap` use Go _type instances_, not strings.
- Use fully qualified struct literals if ambiguous.
- For `FieldNameMap`, ensure struct fields have correct `gen:"name"` tags.
</Accordion>
<Accordion title="Include/Exclude Patterns Not Filtering Correctly">
- Confirm patterns are shell-style globs (e.g., `*Repo`, `Query*`).
- Ensure pattern matches the fully qualified type name, typically including package path as prefix.
- Remember whitelist (`Include*`) has precedence over blacklist (`Exclude*`).
</Accordion>
</AccordionGroup>

---

## Incremental Adoption Workflow

1. **Start by declaring a broad config with `IncludeInterfaces` and `IncludeStructs`** selecting your primary interfaces and structs.
2. **Map your custom Go types in `FieldTypeMap` and tags in `FieldNameMap`** to get typed field helpers.
3. **Generate output to a distinct directory** to manage generated code separately.
4. **Gradually expand your include patterns or switch to excludes to refine generation scope.**
5. **Validate generated code by building and running tests before committing.**

---

## Sample Configs from the Ecosystem

### Filtering Interfaces and Structs by Patterns

```go
var _ = genconfig.Config{
    IncludeInterfaces: []any{"Query*"},
}
```
This will generate code only for interfaces starting with `Query`.

### Excluding Nested Types in Multi-Level Directories

```go
var _ = genconfig.Config{
    ExcludeInterfaces: []any{"I3"},
    ExcludeStructs:    []any{"S3"},
}
```
Exclude specific interfaces and structs declared deeper in nested folders.

---

## Summary

Customizing generation with `genconfig.Config` unlocks the full potential of GORM CLI by tailoring the generated code to fit your project's standards, incremental adoption needs, and type system extensions. By strategically overriding output paths, mapping complex fields, and filtering generation scope, you maintain a clean, maintainable, and type-safe codebase that aligns perfectly with your domain.


---

## Related Documentation

- [Quickstart: Generating Type-Safe APIs](/guides/getting-started-workflows/quickstart-complete-workflow)
- [Using Generated Field Helpers](/guides/getting-started-workflows/using-field-helpers)
- [Template-Based SQL Queries](/guides/advanced-usage-patterns/template-queries)
- [Managing Associations and Relationships](/guides/advanced-usage-patterns/working-with-associations)
- [Basic Configuration](/getting-started/configuration-troubleshooting/basic-configuration)


---

## Reference: `genconfig.Config` Fields

| Field              | Type           | Description |
|--------------------|----------------|-------------|
| `OutPath`          | `string`       | Overrides output directory for generated code in current package.
| `FieldTypeMap`     | `map[any]any`  | Maps Go type instances to typed field helper instances.
| `FieldNameMap`     | `map[string]any` | Maps `gen` tag names to typed field helper instances.
| `FileLevel`        | `bool`         | If true, config applies only to the defining source file.
| `IncludeInterfaces`| `[]any`        | Whitelist for interfaces to generate.
| `ExcludeInterfaces`| `[]any`        | Blacklist for interfaces to skip.
| `IncludeStructs`   | `[]any`        | Whitelist for structs to generate.
| `ExcludeStructs`   | `[]any`        | Blacklist for structs to skip.

---

## See Also

- `genconfig.Config` struct [source code](https://github.com/go-gorm/cli/blob/main/genconfig/config.go)
- Generated field helpers and usage in the [README example](https://github.com/go-gorm/cli/blob/main/README.md)

---